<?php
if($pacienteEntity){
    $title = $pacienteEntity->getPacienteNombre()." ".$pacienteEntity->getPacienteAp()." ".$pacienteEntity->getPacienteAm();
    $this->headTitle($title);
    ?>

    <h3><?php echo $this->escapeHtml($title); ?></h3>
    <div>
    <fieldset>
        <legend>Datos generales del paciente</legend>
        <div class="col s4">
            <div class="label-container">
                <label>Fecha de nacimiento:</label>
                <p><?php echo $pacienteEntity->getPacienteFechanacimiento()?></p>
            </div>
            <div class="label-container">
                <label>Responsable:</label>
                <p><?php echo $pacienteEntity->getPacienteResponsable()?></p>
            </div>
        </div>
        <div class="col s4">
            <div class="label-container">
                <label>Edad:</label>
                <p><?php echo $edad . " años"?></p>
            </div>
            <div class="label-container">
                <label>Teléfono responsable:</label>
                <p><?php echo $pacienteEntity->getPacienteTelefonoresponsable()?></p>
            </div>
        </div>
        <div class="col s4">
            <div class="label-container">
                <label>Sexo:</label>
                <p><?php echo $pacienteEntity->getPacienteSexo()?></p>
            </div>
        </div>
    </fieldset>
    <br>
    <?php if($consultorioEnuso == 1) : ?>
        <div class="row">
            <fieldset>
                <legend>Para uso exclusivo del hospital</legend>
                <div class="col s12">
                    <div id="radioConsulta" class="col s4">
                        <input class="with-gap" name="grupo1" type="radio" id="test3" checked/>
                        <label for="test3">Consulta</label>
                    </div>
                </div>
                <div class="col s4">
                    <div class="label-container">
                        <label>Médico:</label>
                        <p><?php echo $consultaByPaciente->getMedico()->getMedicoNombre()." ".$consultaByPaciente->getMedico()->getMedicoApellidopaterno()." ".$consultaByPaciente->getMedico()->getMedicoApellidomaterno();?></p>
                    </div>
                    <div class="label-container">
                        <label>Consultorio:</label>
                        <p><?php echo $consultaByPaciente->getConsultorio()->getConsultorioNombre()?></p>
                    </div>
                </div>
                <div class="col s4">
                    <div class="label-container">
                        <label>Fecha de consulta:</label>
                        <p><?php echo $consultaByPaciente->getConsultaFecha()?></p>
                    </div>
                    <div class="label-container">
                        <label>Hora de consulta:</label>
                        <p><?php echo $consultaByPaciente->getConsultaHora()?></p>
                    </div>
                </div>
                <div class="col s4">
                    <div class="label-container">
                        <label>Diagnóstico:</label>
                        <p><?php echo $consultaByPaciente->getConsultaDiagnostico()?></p>
                    </div>
                    <div class="label-container">
                        <label>Observación:</label>
                        <p><?php echo $consultaByPaciente->getConsultaObservaciones()?></p>
                    </div>
                </div>
                <div class="right col s4">
                    <button id="botonAltaPacienteConsulta" style="width: 100%; height: 45px; margin-top: 20px;" class="btn waves-effect waves-light disabled" name="action">Alta Paciente - Consulta
                        <i class="mdi-action-accessibility left"></i>
                    </button>
                </div>
            </fieldset>
        </div>
        <div id="cargosConsulta">
        <fieldset>
        <legend>Cargos al paciente</legend>
        <div id="totalSuperior" class="col s9">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
        <div class=" col s3 offset-s9">
            <a id="nuevoCargoConsultaArticulo" class="tooltipped modal-trigger right" data-position="right" data-tooltip="AgregarCargoconsulta" href='#create-modal-cargoconsulta-articulo'><i class="mdi-content-add-circle-outline prefix"></i>Agregar producto a cuenta</a>
        </div>
        <div id="cargoconsultaArticuloResult" class="col s12">
            <table class="hoverable striped">
                <thead>
                <tr>
                    <th>Cantidad</th>
                    <th>Articulo</th>
                    <th>Descripción</th>
                    <th>Salida</th>
                    <th>Destino</th>
                    <th>Fecha/hora</th>
                    <th>Precio</th>
                    <th>Subtotal</th>
                    <th>IVA</th>
                    <th>Total</th>
                    <th>Opciones</th>
                </tr>
                </thead>
                <tbody>
                <!-- Aquí agregamos los elementos con javascript -->
                </tbody>
            </table>
        </div>
        <!-- Create Modal Structure -->
        <div id="create-modal-cargoconsulta-articulo" class="modal bottom-sheet" style="width: 100%; bottom: 15px;">
            <div class="modal-content">
                <h3>Agregar producto a cuenta</h3>
                <div class="row" id="table-header">
                    <?php $cargoconsultaForm->prepare();?>
                    <?php echo $this->form()->openTag($cargoconsultaForm); ?>
                    <div class="input-field">
                        <?php echo $this->formHidden($cargoconsultaForm->get('idconsulta')); ?>
                    </div>
                    <div id="modalCargoconsultaArticulo" class="row">
                        <div id="busquedaCargoconsultaArticulo" class="col s12">
                            <div class="input-field col s4 left" id="search-container">
                                <i class="mdi-action-search prefix"></i>
                                <?php echo $this->formText($cargoconsultaForm->get('busquedaArticulo')); ?>
                                <?php echo $this->formLabel($cargoconsultaForm->get('busquedaArticulo')); ?>
                            </div>
                            <div class="hiddendiv col s4">
                                <div class="input-field">
                                    <?php $cargoconsultaForm->get('cargoconsultaarticulo_by')->setValue('nombre'); ?>
                                    <?php echo $this->formSelect($cargoconsultaForm->get('cargoconsultaarticulo_by')); ?>
                                    <span class="red-text hidden" for="cargoconsultaarticulo_by" id="cargoconsultaarticulo_by_error">Debe selecionar un tipo de busqueda.</span><br><br>
                                </div>
                            </div>
                            <div class="right col s4">
                                <button id="buscarCargoconsultaArticulo" style="width: 100%; height: 45px; margin-top: 20px;" class="btn light-blue lighten-3 waves-effect waves-light">Buscar</button>
                            </div>
                            <div id="fieldsetCargoconsultaArticulo" class="col s12">
                                <fieldset>
                                    <legend>Artículo</legend>
                                    <div id="fieldsetCargoconsultaArticuloEntity" class="left col s8">
                                        <!-- Aquí agregamos los elementos con javascript -->
                                    </div>
                                    <div id="botonGuardarCargoconsultaArticulo" class="right col s4" style="margin-top: 80px;">
                                        <button id="guardarCargoconsultaArticulo" class="btn waves-effect waves-light" type="submit">Agregar</button>
                                    </div>
                                </fieldset>
                                <br>
                                <br>
                            </div>
                            <div id="tablaCargoconsultaArticulo" class="col s12">
                                <table>
                                    <thead>
                                    <tr>
                                        <th>Existencias</th>
                                        <th>Articulo</th>
                                        <th>Descripción</th>
                                        <th>Precio</th>
                                        <th>Salida</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- Aquí agregamos los elementos con javascript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="tablaCargoconsultaArticuloAgregado" class="col s7 hide-on-med-and-down hide-on-med-and-up">
                            <table>
                                <thead>
                                <tr>
                                    <th>Cantidad</th>
                                    <th>Articulo</th>
                                    <th>Descripción</th>
                                    <th>Salida</th>
                                    <th>Destino</th>
                                    <th>Fecha/hora</th>
                                    <th>Precio</th>
                                    <th>Subtotal</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- Aquí agregamos los elementos con javascript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <?php echo $this->form()->closeTag(); ?>
                </div>
            </div>
        </div>
        <br>
        <br>
        <div class=" col s3 offset-s9">
            <a id="nuevoCargoConsultaServicio" class="tooltipped modal-trigger right" data-position="right" data-tooltip="AgregarCargoconsulta" href='#create-modal-cargoconsulta-servicio'><i class="mdi-content-add-circle-outline prefix"></i>Agregar servicio a cuenta</a>
        </div>
        <!-- Create Modal Structure -->
        <div id="create-modal-cargoconsulta-servicio" class="modal bottom-sheet" style="width: 100%; bottom: 15px;">
            <div class="modal-content">
                <h3>Agregar servicio a cuenta</h3>
                <div class="row" id="table-header">
                    <?php $cargoconsultaForm->prepare();?>
                    <?php echo $this->form()->openTag($cargoconsultaForm); ?>
                    <div class="input-field">
                        <?php echo $this->formHidden($cargoconsultaForm->get('idconsulta')); ?>
                    </div>
                    <div id="modalCargoconsultaServicio" class="row">
                        <div id="busquedaCargoconsultaServicio" class="col s12">
                            <div class="input-field col s4 left" id="search-container">
                                <i class="mdi-action-search prefix"></i>
                                <?php echo $this->formText($cargoconsultaForm->get('busquedaServicio')); ?>
                                <?php echo $this->formLabel($cargoconsultaForm->get('busquedaServicio')); ?>
                            </div>
                            <div class="col s4">
                                <div class="input-field">
                                    <?php echo $this->formSelect($cargoconsultaForm->get('cargoconsultaservicio_by')); ?>
                                    <span class="red-text hidden" for="cargoconsultaservicio_by" id="cargoconsultaservicio_by_error">Debe selecionar un tipo de busqueda.</span><br><br>
                                </div>
                            </div>
                            <div class="right col s4">
                                <button id="buscarCargoconsultaServicio" style="width: 100%; height: 45px; margin-top: 20px;" class="btn light-blue lighten-3 waves-effect waves-light">Buscar</button>
                            </div>
                            <div id="fieldsetCargoconsultaServicio" class="col s12">
                                <fieldset>
                                    <legend>Servicio</legend>
                                    <div id="fieldsetCargoconsultaServicioEntity" class="left col s8">
                                        <!-- Aquí agregamos los elementos con javascript -->
                                    </div>
                                    <div id="botonGuardarCargoconsultaServicio" class="right col s4" style="margin-top: 50px;">
                                        <button id="guardarCargoconsultaServicio" class="btn waves-effect waves-light" type="submit">Agregar</button>
                                    </div>
                                </fieldset>
                                <br>
                                <br>
                            </div>
                            <div id="tablaCargoconsultaServicio" class="col s12">
                                <table>
                                    <thead>
                                    <tr>
                                        <th>Servicio</th>
                                        <th>Descripción</th>
                                        <th>Precio</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- Aquí agregamos los elementos con javascript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="tablaCargoconsultaServicioAgregado" class="col s6 hide-on-med-and-down hide-on-med-and-up">
                            <table>
                                <thead>
                                <tr>
                                    <th>Cantidad</th>
                                    <th>Servicio</th>
                                    <th>Fecha/hora</th>
                                    <th>Precio</th>
                                    <th>Subtotal</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- Aquí agregamos los elementos con javascript -->
                                </tbody>
                            </table>
                            <!-- Aquí agregamos los elementos con javascript -->
                        </div>
                    </div>
                    <?php echo $this->form()->closeTag(); ?>
                </div>
            </div>
        </div>
        <!-- End Create Modal Structure -->
        <div id="cargoconsultaServicioResult" class="col s12">
            <table class="hoverable striped">
                <thead>
                <tr>
                    <th>Cantidad</th>
                    <th>Servicio</th>
                    <th>Descripción</th>
                    <th>Fecha/hora</th>
                    <th>Precio</th>
                    <th>Subtotal</th>
                    <th>IVA</th>
                    <th>Total</th>
                    <th>Opciones</th>
                </tr>
                </thead>
                <tbody>
                <!-- Aquí agregamos los elementos con javascript -->
                </tbody>
            </table>
        </div>
        <div class="col s12">
            <div id="botonPagarAnticipoConsulta" class="col s3">
                <!-- Aquí agregamos los elementos con javascript -->
            </div>
            <!-- Create Modal Structure -->
            <div id="create-modal-pagar-consulta" class="modal bottom-sheet">
                <div class="modal-content">
                    <div class="row">
                        <fieldset>
                            <legend>Registro de Pago</legend>
                            <div class="col s12">
                                <div id="radioPagoConsulta" class="col s4">
                                    <p onclick="javascript:pagoConsulta();" >
                                        <input class="with-gap" name="grupo2" type="radio" id="radio2"  />
                                        <label for="radio2">Pago</label>
                                    </p>
                                </div>
                            </div>
                            <div id="pagoConsulta" class="hiddendiv">
                                <!-- Agregamos elementos con Javascript -->
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <?php /*
                <div id="botonGenerarFactura" class="col s3">
                    <!-- Aquí agregamos los elementos con javascript -->
                </div>
                 * 
                 */?>
            <?php /*
                <div id="botonGenerarNota" class="col s3">
                    <!-- Aquí agregamos los elementos con javascript -->
                </div>
                 * 
                 */?>
            <div id="totalInferior" class="col s9">
                <!-- Aquí agregamos los elementos con javascript -->
            </div>
        </div>
        <?php /*
            <div class="col s12">
                <div id="botonVerFactura" class="col s3 offset-s2">
                    <!-- Aquí agregamos los elementos con javascript -->
                </div>
            </div>
             * 
             */?>
        </fieldset>
        </div>
    <?php elseif($cuartoEnuso == 1) :?>
    <div class="row">
        <fieldset>
            <legend>Para uso exclusivo del hospital</legend>
            <div class="col s12">
                <div id="radioAdmision" class="col s4">
                    <input class="with-gap" name="grupo1" type="radio" id="test4" checked />
                    <label for="test4">Admisión</label>
                </div>
            </div>
            <div class="col s4">
                <div class="label-container">
                    <label>Médico:</label>
                    <p><?php echo $admisionByPaciente->getMedico()->getMedicoNombre()." ".$admisionByPaciente->getMedico()->getMedicoApellidopaterno()." ".$admisionByPaciente->getMedico()->getMedicoApellidomaterno();?></p>
                </div>
                <div class="label-container">
                    <label>Cuarto:</label>
                    <p><?php echo $admisionByPaciente->getCuarto()->getCuartoNombre()?></p>
                </div>
            </div>
            <div class="col s4">
                <div class="label-container">
                    <label>Fecha de admisión:</label>
                    <p><?php echo $admisionByPaciente->getAdmisionFechaadmision()?></p>
                </div>
            </div>
            <div class="col s4">
                <div class="label-container">
                    <label>Diagnóstico:</label>
                    <p><?php echo $admisionByPaciente->getAdmisionDiagnostico()?></p>
                </div>
                <div class="label-container">
                    <label>Observación:</label>
                    <p><?php echo $admisionByPaciente->getAdmisionObservaciones()?></p>
                </div>
            </div>
            <div class="right col s4">
                <button id="botonAltaPacienteAdmision" style="width: 100%; height: 45px; margin-top: 20px;" class="btn waves-effect waves-light disabled" type="submit" name="action">Alta Paciente - Admisión
                    <i class="mdi-action-accessibility left"></i>
                </button>
            </div>
        </fieldset>
    </div>

    <div class="row">
        <div id="formatoAdmision" class="col s4">
            <form action="<?php echo $this->url('pacientes', array('action'=>'contratofinal'))?>" method="post">
                <input type="hidden" name="idadmision" value="<?php echo $admisionByPaciente->getIdadmision()?>">
                <button id="botonFormatoAdmision" style="width: 100%; height: 45px; margin-top: 20px;" class="btn waves-effect waves-light" type="submit">Formato de Admisión
                    <i class="mdi-action-assignment-ind left"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Cargos de Admision -->
    <div id="cargosAdmision">
    <fieldset>
    <legend>Cargos al paciente</legend>
    <div id="totalSuperiorAdmision" class="col s9">
        <!-- Aquí agregamos los elementos con javascript -->
    </div>
    <div class=" col s3 offset-s9">
        <a id="nuevoCargoAdmisionArticulo" class="tooltipped modal-trigger right" data-position="right" data-tooltip="AgregarCargoadmision" href='#create-modal-cargoadmision-articulo'><i class="mdi-content-add-circle-outline prefix"></i>Agregar producto a cuenta</a>
    </div>
    <!-- Create Modal Structure -->
    <div id="create-modal-cargoadmision-articulo" class="modal bottom-sheet" style="width: 100%; bottom: 15px;">
        <div class="modal-content">
            <h3>Agregar producto a cuenta</h3>
            <div class="row" id="table-header">
                <?php $cargoadmisionForm->prepare();?>
                <?php echo $this->form()->openTag($cargoadmisionForm); ?>
                <div class="input-field">
                    <?php echo $this->formHidden($cargoadmisionForm->get('idadmision')); ?>
                </div>
                <div id="modalCargoadmisionArticulo" class="row">
                    <div id="busquedaCargoadmisionArticulo" class="col s12">
                        <div class="input-field col s4 left" id="search-container">
                            <i class="mdi-action-search prefix"></i>
                            <?php echo $this->formText($cargoadmisionForm->get('busquedaAdmisionArticulo')); ?>
                            <?php echo $this->formLabel($cargoadmisionForm->get('busquedaAdmisionArticulo')); ?>
                        </div>
                        <div class="hiddendiv col s4">
                            <div class="input-field">
                                <?php $cargoadmisionForm->get('cargoadmisionarticulo_by')->setValue('nombre'); ?>
                                <?php echo $this->formSelect($cargoadmisionForm->get('cargoadmisionarticulo_by')); ?>
                                <span class="red-text hidden" for="cargoadmisionarticulo_by" id="cargoadmisionarticulo_by_error">Debe selecionar un tipo de busqueda.</span><br><br>
                            </div>
                        </div>
                        <div class="right col s4">
                            <button id="buscarCargoadmisionArticulo" style="width: 100%; height: 45px; margin-top: 20px;" class="btn light-blue lighten-3 waves-effect waves-light">Buscar</button>
                        </div>
                        <div id="fieldsetCargoadmisionArticulo" class="col s12">
                            <fieldset>
                                <legend>Artículo</legend>
                                <div id="fieldsetCargoadmisionArticuloEntity" class="left col s8">
                                    <!-- Aquí agregamos los elementos con javascript -->
                                </div>
                                <div id="botonGuardarCargoadmisionArticulo" class="right col s4" style="margin-top: 80px;">
                                    <button id="guardarCargoadmisionArticulo" class="btn waves-effect waves-light" type="submit">Agregar</button>
                                </div>
                            </fieldset>
                            <br>
                            <br>
                        </div>
                        <div id="tablaCargoadmisionArticulo" class="col s12">
                            <table>
                                <thead>
                                <tr>
                                    <th>Existencias</th>
                                    <th>Articulo</th>
                                    <th>Descripción</th>
                                    <th>Precio</th>
                                    <th>Salida</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- Aquí agregamos los elementos con javascript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tablaCargoadmisionArticuloAgregado" class="col s7 hide-on-med-and-down hide-on-med-and-up">
                        <table>
                            <thead>
                            <tr>
                                <th>Cantidad</th>
                                <th>Articulo</th>
                                <th>Descripción</th>
                                <th>Salida</th>
                                <th>Destino</th>
                                <th>Fecha/hora</th>
                                <th>Precio</th>
                                <th>Subtotal</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Aquí agregamos los elementos con javascript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <?php echo $this->form()->closeTag(); ?>
            </div>
        </div>
    </div>
    <!-- End Create Modal Structure -->


    <div id="cargoadmisionArticuloResult" class="col s12">
        <table class="hoverable striped">
            <thead>
            <tr>
                <th>Cantidad</th>
                <th>Articulo</th>
                <th>Descripción</th>
                <th>Fecha/hora</th>
                <th>Precio</th>
                <th>Subtotal</th>
                <th>IVA</th>
                <th>Total</th>
                <th>Opciones</th>
            </tr>
            </thead>
            <tbody>
            <!-- Aquí agregamos los elementos con javascript -->
            </tbody>
        </table>
    </div>
    <br>
    <br>
    <div class=" col s3 offset-s9">
        <a id="nuevoCargoAdmisionServicio" class="tooltipped modal-trigger right" data-position="right" data-tooltip="AgregarCargoadmision" href='#create-modal-cargoadmision-servicio'><i class="mdi-content-add-circle-outline prefix"></i>Agregar servicio a cuenta</a>
    </div>
    <!-- Create Modal Structure -->
    <div id="create-modal-cargoadmision-servicio" class="modal bottom-sheet" style="width: 100%; bottom: 15px;">
        <div class="modal-content">
            <h3>Agregar servicio a cuenta</h3>
            <div class="row" id="table-header">
                <?php $cargoadmisionForm->prepare();?>
                <?php echo $this->form()->openTag($cargoadmisionForm); ?>
                <div class="input-field">
                    <?php echo $this->formHidden($cargoadmisionForm->get('idadmision')); ?>
                </div>
                <div id="modalCargoadmisionServicio" class="row">
                    <div id="busquedaCargoadmisionServicio" class="col s12">
                        <div class="input-field col s4 left" id="search-container">
                            <i class="mdi-action-search prefix"></i>
                            <?php echo $this->formText($cargoadmisionForm->get('busquedaAdmisionServicio')); ?>
                            <?php echo $this->formLabel($cargoadmisionForm->get('busquedaAdmisionServicio')); ?>
                        </div>
                        <div class="col s4">
                            <div class="input-field">
                                <?php echo $this->formSelect($cargoadmisionForm->get('cargoadmisionservicio_by')); ?>
                                <span class="red-text hidden" for="cargoadmisionservicio_by" id="cargoadmisionservicio_by_error">Debe selecionar un tipo de busqueda.</span><br><br>
                            </div>
                        </div>
                        <div class="right col s4">
                            <button id="buscarCargoadmisionServicio" style="width: 100%; height: 45px; margin-top: 20px;" class="btn light-blue lighten-3 waves-effect waves-light">Buscar</button>
                        </div>
                        <div id="fieldsetCargoadmisionServicio" class="col s12">
                            <fieldset>
                                <legend>Servicio</legend>
                                <div id="fieldsetCargoadmisionServicioEntity" class="left col s8">
                                    <!-- Aquí agregamos los elementos con javascript -->
                                </div>
                                <div id="botonGuardarCargoadmisionServicio" class="right col s4" style="margin-top: 50px;">
                                    <button id="guardarCargoadmisionServicio" class="btn waves-effect waves-light" type="submit">Agregar</button>
                                </div>
                            </fieldset>
                            <br>
                            <br>
                        </div>
                        <div id="tablaCargoadmisionServicio" class="col s12">
                            <table>
                                <thead>
                                <tr>
                                    <th>Servicio</th>
                                    <th>Descripción</th>
                                    <th>Precio</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- Aquí agregamos los elementos con javascript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tablaCargoadmisionServicioAgregado" class="col s6 hide-on-med-and-down hide-on-med-and-up">
                        <table>
                            <thead>
                            <tr>
                                <th>Cantidad</th>
                                <th>Servicio</th>
                                <th>Fecha/hora</th>
                                <th>Precio</th>
                                <th>Subtotal</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Aquí agregamos los elementos con javascript -->
                            </tbody>
                        </table>
                        <!-- Aquí agregamos los elementos con javascript -->
                    </div>
                </div>
                <?php echo $this->form()->closeTag(); ?>
            </div>
        </div>
    </div>
    <!-- End Create Modal Structure -->
    <div id="cargoadmisionServicioResult" class="col s12">
        <table class="hoverable striped">
            <thead>
            <tr>
                <th>Cantidad</th>
                <th>Servicio</th>
                <th>Descripción</th>
                <th>Fecha/hora</th>
                <th>Precio</th>
                <th>Subtotal</th>
                <th>IVA</th>
                <th>Total</th>
                <th>Opciones</th>
            </tr>
            </thead>
            <tbody>
            <!-- Aquí agregamos los elementos con javascript -->
            </tbody>
        </table>
    </div>
    <div class="col s12">
        <div id="botonPagarAnticipoAdmision" class="col s3">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
        <!-- Create Modal Structure -->
        <div id="create-modal-pagar-admision" class="modal bottom-sheet">
            <div class="modal-content">
                <div class="row">
                    <fieldset>
                        <legend>Registro de Anticipo/Pago</legend>
                        <div class="col s12">
                            <div id="radioAnticipoAdmision" class="col s4">
                                <p onclick="javascript:anticipoAdmision();" >
                                    <input class="with-gap" name="grupo2" type="radio" id="radio1"  />
                                    <label for="radio1">Anticipo</label>
                                </p>
                            </div>
                            <div id="radioPagoAdmision" class="col s4">
                                <p onclick="javascript:pagoAdmision();" >
                                    <input class="with-gap" name="grupo2" type="radio" id="radio2"  />
                                    <label for="radio2">Pago</label>
                                </p>
                            </div>
                        </div>
                        <div id="anticipoAdmision" class="hiddendiv">
                            <!-- Agregamos elementos con Javascript -->
                        </div>
                        <div id="pagoAdmision" class="hiddendiv">
                            <!-- Agregamos elementos con Javascript -->
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <br>
        <br>
        <?php /*
        <div id="botonGenerarFacturaAdmision" class="col s3">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
         * 
         */?>
        <?php /*
        <div id="botonGenerarNotaAdmision" class="col s3">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
         * 
         */ ?>
        <div id="totalInferiorAdmision" class="col s9">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
    </div>
    <?php /*
    <div class="col s12">
        <div id="botonVerFacturaAdmision" class="col s3 offset-s2">
            <!-- Aquí agregamos los elementos con javascript -->
        </div>
    </div>
     * 
     */?>
    </fieldset>
    </div>
    </div>
<?php endif ?>

    <script type="text/javascript">
    $(document).ready(function() {

        $('select').material_select();
        $("#consulta_fecha").datepicker();
        $("#admision_fechaadmision").datepicker();
        $('.modal-trigger').leanModal();
        // timepicki
        //$('#consulta_hora').timepicki();
        // lolliclock
        $('#consulta_hora').lolliclock({autoclose:true});

        //Cargoconsulta
        $("#tablaCargoconsultaArticulo").tablesorter({headers:{5:{sorter:false}}});
        $("#tablaCargoconsultaArticulo").filterTable({inputSelector: '#search-container input',minRows:2});

        //Cargoadmision
        $("#tablaCargoadmisionArticulo").tablesorter({headers:{5:{sorter:false}}});
        $("#tablaCargoadmisionArticulo").filterTable({inputSelector: '#search-container input',minRows:2});

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataStringArticulo = 'tablaCargoconsultaArticulo=true';

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringArticulo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                cargoconsultaArray = []
                var cargoconsultaEntity = data.cargoconsultaArray
                if(cargoconsultaEntity){
                    $.each( cargoconsultaEntity, function( key, value ) {
                        cargoconsultaArray.push({
                            "idcargoconsulta" : value.idcargoconsulta,
                            "idconsulta" : value.idconsulta,
                            "status" : value.status,
                            "cantidad" : value.cantidad,
                            "articulo" : value.articulo,
                            "descripcion" : value.descripcion,
                            "salida" : value.salida,
                            "destino" : value.destino,
                            "fechahora" : value.fechahora,
                            "precio" : value.precio,
                            "subtotal" : value.subtotal,
                            "iva" : value.iva,
                            "total" : value.total
                        });
                    });
                }

                tablaCargoconsultaArticuloAgregadoModal(cargoconsultaArray);
                tablaCargoconsultaArticuloAgregadoInicial(cargoconsultaArray);

            },
            error: function(){
                //alert("No se pudo construir la tabla de cargos articulos del paciente")
            }
        });

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataStringServicio = 'tablaCargoconsultaServicio=true';

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringServicio,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                cargoconsultaArray = []
                var cargoconsultaEntity = data.cargoconsultaArray
                if(cargoconsultaEntity){
                    $.each( cargoconsultaEntity, function( key, value ) {
                        cargoconsultaArray.push({
                            "idcargoconsulta" : value.idcargoconsulta,
                            "idconsulta" : value.idconsulta,
                            "status" : value.status,
                            "cantidad" : value.cantidad,
                            "servicio" : value.servicio,
                            "idservicio" : value.idservicio,
                            "descripcion" : value.descripcion,
                            "salida" : value.salida,
                            "destino" : value.destino,
                            "fechahora" : value.fechahora,
                            "precio" : value.precio,
                            "subtotal" : value.subtotal,
                            "iva" : value.iva,
                            "total" : value.total
                        });
                    });
                }

                tablaCargoconsultaServicioAgregadoModal(cargoconsultaArray);
                tablaCargoconsultaServicioAgregadoInicial(cargoconsultaArray);

                // Refrescamos
                buscarCargoconsultaServicio(idservicio);
            },
            error: function(){
                //alert("No se pudo construir la tabla de cargos servicios del paciente")
            }
        });


        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataStringAdmisionArticulo = 'tablaCargoadmisionArticulo=true';

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringAdmisionArticulo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {

                cargoadmisionArray = []
                var cargoadmisionEntity = data.cargoadmisionArray
                $.each( cargoadmisionEntity, function( key, value ) {
                    cargoadmisionArray.push({
                        "idcargoadmision" : value.idcargoadmision,
                        "idadmision" : value.idadmision,
                        "status" : value.status,
                        "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "salida" : value.salida,
                        "destino" : value.destino,
                        "fechahora" : value.fechahora,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total
                    });
                });

                tablaCargoadmisionArticuloAgregadoModal(cargoadmisionArray);
                tablaCargoadmisionArticuloAgregadoInicial(cargoadmisionArray);

            },
            error: function(){
                //alert("No se pudo construir la tabla de cargos articulos del paciente")
            }
        });

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataStringAdmisionServicio = 'tablaCargoadmisionServicio=true';

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringAdmisionServicio,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {

                //console.log(data.cargoadmisionArray);
                cargoadmisionArray = []
                var cargoadmisionEntity = data.cargoadmisionArray
                $.each( cargoadmisionEntity, function( key, value ) {
                    cargoadmisionArray.push({
                        "idcargoadmision" : value.idcargoadmision,
                        "idadmision" : value.idadmision,
                        "status" : value.status,
                        "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                        "servicio" : value.servicio,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total,
                        "fechahora" : value.fechahora
                    });
                });

                tablaCargoadmisionServicioAgregadoModal(cargoadmisionArray);
                tablaCargoadmisionServicioAgregadoInicial(cargoadmisionArray);

                // Refrescamos
                buscarCargoadmisionServicio(idservicio);

            },
            error: function(){
                // alert("No se pudo construir la tabla de cargos servicios del paciente")
            }
        });

    });

    $("#buscarCargoconsultaArticulo").click(function() {

        //Obtenemos el valor del selector de lugarinventario
        var busquedaArticulo = $("input#busquedaArticulo").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoconsultaarticulo_by = $("select#cargoconsultaarticulo_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoconsultaarticulo_by == "") {
            if ($('span#cargoconsultaarticulo_by_error').hasClass('hidden')){
                $('span#cargoconsultaarticulo_by_error').removeClass('hidden');
                $("span#cargoconsultaarticulo_by_error").show();
                $("span#cargoconsultaarticulo_by").focus();
            }
            return false;
        }else{
            $("span#cargoconsultaarticulo_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoconsultaarticulo_by=' + cargoconsultaarticulo_by + '&busquedaArticulo=' + busquedaArticulo ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                ordencompradetalleArray = []
                var ordencompradetalleEntity = data.ordencompradetalleArray
                $.each( ordencompradetalleEntity, function( key, value ) {
                    ordencompradetalleArray.push({
                        "idordencompradetalle" : value.idordencompradetalle,
                        "idlugarinventario" : value.idlugarinventario,
                        "cargoconsulta_tipo" : value.cargoconsulta_tipo,
                        "cargoconsulta_fecha" : value.cargoconsulta_fecha,
                        "caducidad" : value.ordencompradetalle_caducidad,
                        "existencia" : value.existencia,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "salida" : value.salida
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarConsultaArticulo(ordencompradetalleArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                $.each(ordencompradetalleArray, function(keys, values){
                    // Si dan clic a una entidad de la colección
                    $("#entidadArticulo-"+values.idordencompradetalle).click(function(){
                        if ($('#fieldsetCargoconsultaArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoconsultaArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoconsulta_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoconsulta
                        var div = document.getElementById("fieldsetCargoconsultaArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de cargoconsulta_tipo lo eliminamos
                        if(document.getElementById('divinputCargoconsultaTipo')){
                            var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                            divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                        }
                        // Si el formulario ya tiene el input de cargoconsulta_fecha lo eliminamos
                        if(document.getElementById('divinputCargoconsultaFecha')){
                            var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                            divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                        var form = document.getElementById('CargoconsultaForm');
                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaTipo = document.createElement('div');
                        divinputCargoconsultaTipo.className = "input-field";
                        divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                        var inputCargoconsultaTipo = document.createElement('input');
                        inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                        divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaFecha = document.createElement('div');
                        divinputCargoconsultaFecha.className = "input-field";
                        divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                        var inputCargoconsultaFecha = document.createElement('input');
                        inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                        divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    });
                });
            },
            error: function(){
                $('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    });

    $("#buscarCargoconsultaServicio").click(function() {

        //Obtenemos el valor del selector de lugarinventario
        var busquedaServicio = $("input#busquedaServicio").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoconsultaservicio_by = $("select#cargoconsultaservicio_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoconsultaservicio_by == "") {
            if ($('span#cargoconsultaservicio_by_error').hasClass('hidden')){
                $('span#cargoconsultaservicio_by_error').removeClass('hidden');
                $("span#cargoconsultaservicio_by_error").show();
                $("span#cargoconsultaservicio_by").focus();
            }
            return false;
        }else{
            $("span#cargoconsultaservicio_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoconsultaservicio_by=' + cargoconsultaservicio_by + '&busquedaServicio=' + busquedaServicio ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                servicioArray = []
                var servicioEntity = data.servicioArray
                $.each( servicioEntity, function( key, value ) {
                    servicioArray.push({
                        "idservicio" : value.idservicio,
                        "cargoconsulta_tipo" : value.cargoconsulta_tipo,
                        "cargoconsulta_fecha" : value.cargoconsulta_fecha,
                        "servicio_nombre" : value.servicio_nombre,
                        "servicio_descripcion" : value.servicio_descripcion,
                        "servicio_precio" : value.servicio_precio
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarConsultaServicio(servicioArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                $.each(servicioArray, function(keys, values){
                    // Si dan clic a una entidad de la colección
                    $("#entidadServicio-"+values.idservicio).click(function(){
                        if ($('#fieldsetCargoconsultaServicio').hasClass('hiddendiv')){
                            $('#fieldsetCargoconsultaServicio').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        // Creamos el input de cantidad de tipo input
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var inputCantidad = document.createElement('input');
                        inputCantidad.setAttribute ( 'id', 'cantidad' );
                        inputCantidad.style.width = "20%";
                        inputCantidad.type = "number";
                        inputCantidad.min ="1";
                        inputCantidad.max = "999999999";

                        // agregamos las options en nuestro input
                        divinputCantidad.appendChild(inputCantidad);

                        // Creamos la entidad textual lista para agregar al cargoconsulta
                        var div = document.getElementById("fieldsetCargoconsultaServicioEntity");
                        div.innerHTML = div.dir;
                        var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                        var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                        var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                        var textoCargoconsultaFecha = document.createTextNode("Fecha: "+values.cargoconsulta_fecha);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoServicioNombre);
                        div.appendChild(br);
                        div.appendChild(textoServicioDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoServicioPrecio);
                        div.appendChild(br3);
                        div.appendChild(textoCargoconsultaFecha);
                        div.appendChild(br4);
                        div.appendChild(textoCantidad);
                        div.appendChild(inputCantidad);

                        // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idservicio lo eliminamos
                        if(document.getElementById('divinputIdservicio')){
                            var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                            divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                        }

                        // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                        if(document.getElementById('divinputCargoconsultaTipo')){
                            var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                            divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                        }
                        // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                        if(document.getElementById('divinputCargoconsultaFecha')){
                            var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                            divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                        var form = document.getElementById('CargoconsultaForm');
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdservicio = document.createElement('div');
                        divinputIdservicio.className = "input-field";
                        divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                        var inputIdservicio = document.createElement('input');
                        inputIdservicio.setAttribute ( 'id', 'idservicio' );
                        inputIdservicio.setAttribute ( 'type', 'hidden' );
                        inputIdservicio.setAttribute ( 'name', 'idservicio' );
                        inputIdservicio.setAttribute ( 'value', values.idservicio );
                        divinputIdservicio.appendChild(inputIdservicio)
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaTipo = document.createElement('div');
                        divinputCargoconsultaTipo.className = "input-field";
                        divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                        var inputCargoconsultaTipo = document.createElement('input');
                        inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                        divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaFecha = document.createElement('div');
                        divinputCargoconsultaFecha.className = "input-field";
                        divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                        var inputCargoconsultaFecha = document.createElement('input');
                        inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                        divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaTipo);
                        form.appendChild(divinputIdservicio);
                    });
                });
            },
            error: function(){
                $('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    });

    function generaTablaBuscarConsultaArticulo(ordencompradetalleArray) {

        // Obtener la referencia del elemento div con id = tablaCargoconsultaArticulo
        var div = document.getElementById("tablaCargoconsultaArticulo");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <thead> y <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");
        var thArray = ['Existencias', 'Articulo', 'Descripción', 'Precio', 'Salida']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <th> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <th>, ubica el elemento <th> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <table>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < ordencompradetalleArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");
            hilera.className = "pointer";
            // Le agregamos un id a la entidad <th>
            hilera.setAttribute('id', 'entidadArticulo-' + ordencompradetalleArray[i]["idordencompradetalle"])

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["existencia"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode("$"+ordencompradetalleArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <div>
        div.appendChild(tabla);
    }

    function generaTablaBuscarConsultaServicio(servicioArray) {

        // Obtener la referencia del elemento div con id = tablaCargoconsultaArticulo
        var div = document.getElementById("tablaCargoconsultaServicio");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <thead> y <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");
        var thArray = ['Servicio', 'Descripción', 'Precio']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <th> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <th>, ubica el elemento <th> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <table>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < servicioArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");
            hilera.className = "pointer";
            // Le agregamos un id a la entidad <th>
            hilera.setAttribute('id', 'entidadServicio-' + servicioArray[i]["idservicio"])

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_nombre"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <div>
        div.appendChild(tabla);
    }

    $("#guardarCargoconsultaArticulo").click(function() {

        // Actializar existencias
        //Obtenemos el valor del selector de consulta
        var idordencompradetalle = $("input#idordencompradetalle").val();
        // Actializar existencias

        //Obtenemos el valor del selector de consulta
        var idconsulta = $("input#idconsulta").val();
        //Obtenemos el valor del selector de lugarinventario
        var idlugarinventario = $("input#idlugarinventario").val();
        //Obtenemos el valor del campo cargoconsulta_tipo
        var cargoconsulta_tipo = $("input#cargoconsulta_tipo").val();
        //Obtenemos el valor del campo cargoconsulta_fecha
        var cargoconsulta_fecha = $("input#cargoconsulta_fecha").val();
        //Obtenemos el valor del campo cantidad
        var cantidad = $("select#cantidad").val();

        if(cantidad == null){
            //$('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar. Ya no hay artículos en existencia.</div>')
            alert("Error al intentar agregar. No hay artículos en existencia");
            return false;
        }

        //Obtenemos el valor del campo cargoconsulta_tipo
        var cargoconsulta_destino = $("select#cargoconsulta_destino").val();

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'idconsulta=' + idconsulta + '&idlugarinventario=' + idlugarinventario + '&cargoconsulta_tipo=' + cargoconsulta_tipo + '&cargoconsulta_fecha=' + cargoconsulta_fecha + '&cantidad=' + cantidad + '&cargoconsulta_destino=' + cargoconsulta_destino;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                //$('#cargosConsulta').prepend('<div class="card-panel #00086E-text green accent-2 guardado-ajax"">Cargo guardada exitosamente</div>')
                //$('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text green accent-2 guardado-modal-ajax"">Cargo agregado exitosamente</div>')
                //alert("Cargo agregado exitosamente");

                //console.log(data.cargoconsultaArray);
                cargoconsultaArray = []
                var cargoconsultaEntity = data.cargoconsultaArray
                $.each( cargoconsultaEntity, function( key, value ) {
                    cargoconsultaArray.push({
                        "idcargoconsulta" : value.idcargoconsulta,
                        "idconsulta" : value.idconsulta,
                        "status" : value.status,
                        "cantidad" : value.cantidad,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "salida" : value.salida,
                        "destino" : value.destino,
                        "fechahora" : value.fechahora,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total
                    });
                });

                if ($('#cargoconsultaArticuloResult').hasClass('hiddendiv')){
                    $('#cargoconsultaArticuloResult').removeClass('hiddendiv')
                }

                tablaCargoconsultaArticuloAgregadoModal(cargoconsultaArray);
                tablaCargoconsultaArticuloAgregado(cargoconsultaArray);
                // Refrescamos
                buscarCargoconsultaArticulo(idordencompradetalle);

            },
            error: function(){
                //$('#cargosConsulta').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar guardar</div>')
                //$('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar</div>')
                alert("Error al intentar agregar");
            }
        });

        return false;
    });

    $("#guardarCargoconsultaServicio").click(function() {

        //Obtenemos el valor del selector de consulta
        var idconsulta = $("input#idconsulta").val();
        //Obtenemos el valor del selector de lugarinventario
        var idservicio = $("input#idservicio").val();
        //Obtenemos el valor del campo cargoconsulta_tipo
        var cargoconsulta_tipo = $("input#cargoconsulta_tipo").val();
        //Obtenemos el valor del campo cargoconsulta_fecha
        var cargoconsulta_fecha = $("input#cargoconsulta_fecha").val();
        //Obtenemos el valor del campo cantidad
        var cantidad = $("input#cantidad").val();

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'idconsulta=' + idconsulta + '&idservicio=' + idservicio + '&cargoconsulta_tipo=' + cargoconsulta_tipo + '&cargoconsulta_fecha=' + cargoconsulta_fecha + '&cantidad=' + cantidad;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                //$('#cargosConsulta').prepend('<div class="card-panel #00086E-text green accent-2 guardado-ajax"">Cargo guardada exitosamente</div>')
                //$('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text green accent-2 guardado-modal-ajax"">Cargo agregado exitosamente</div>')
                //alert("Cargo agregado exitosamente");

                //console.log(data.cargoconsultaArray);
                cargoconsultaArray = []
                var cargoconsultaEntity = data.cargoconsultaArray
                $.each( cargoconsultaEntity, function( key, value ) {
                    cargoconsultaArray.push({
                        "idcargoconsulta" : value.idcargoconsulta,
                        "idconsulta" : value.idconsulta,
                        "status" : value.status,
                        "cantidad" : value.cantidad,
                        "servicio" : value.servicio,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total,
                        "fechahora" : value.fechahora
                    });
                });

                if ($('#cargoconsultaServicioResult').hasClass('hiddendiv')){
                    $('#cargoconsultaServicioResult').removeClass('hiddendiv')
                }

                tablaCargoconsultaServicioAgregadoModal(cargoconsultaArray);
                tablaCargoconsultaServicioAgregado(cargoconsultaArray);
                // Refrescamos
                buscarCargoconsultaServicio(idservicio);

            },
            error: function(){
                //$('#cargosConsulta').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar guardar</div>')
                //$('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar</div>')
                alert("Error al intentar agregar");
            }
        });

        return false;
    });

    function tablaCargoconsultaArticuloAgregadoModal(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = tablaCargoconsultaArticuloAgregado
        var div = document.getElementById("tablaCargoconsultaArticuloAgregado");
        div.innerHTML = div.dir;
        // Creamos el elemento <table>
        var tabla   = document.createElement("table");
        // Agregamos clases el elemento <table>
        tabla.className = "hoverable striped";
        // Creamos el elemento <thead>
        var tblHead = document.createElement("thead");
        // Creamos el elemento <tbody>
        var tblBody = document.createElement("tbody");

        // Creamos un array con las columnas de nuestra tabla
        var thArray = ['Cantidad', 'Articulo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

    }
    function tablaCargoconsultaServicioAgregadoModal(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = tablaCargoconsultaServicioAgregado
        var div = document.getElementById("tablaCargoconsultaServicioAgregado");
        div.innerHTML = div.dir;
        // Creamos el elemento <table>
        var tabla   = document.createElement("table");
        // Agregamos clases el elemento <table>
        tabla.className = "hoverable striped";
        // Creamos el elemento <thead>
        var tblHead = document.createElement("thead");
        // Creamos el elemento <tbody>
        var tblBody = document.createElement("tbody");

        // Creamos un array con las columnas de nuestra tabla
        var thArray = ['Cantidad', 'Servicio', /*'Descripción',*/ 'Fecha/hora', 'Precio', 'Subtotal']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                /*
                 if(j == 2){
                 var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                 celda.appendChild(textoCelda);
                 hilera.appendChild(celda);
                 }
                 */
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

    }
    function buscarCargoconsultaArticulo(idordencompradetalle){

        //Obtenemos el valor del selector de lugarinventario
        var busquedaArticulo = $("input#busquedaArticulo").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoconsultaarticulo_by = $("select#cargoconsultaarticulo_by").val();
        //Validamos el campo cargoconsultaarticulo_by, simplemente miramos que no esté vacío
        if (cargoconsultaarticulo_by == "") {
            if ($('span#cargoconsultaarticulo_by_error').hasClass('hidden')){
                $('span#cargoconsultaarticulo_by_error').removeClass('hidden');
                $("span#cargoconsultaarticulo_by_error").show();
                $("span#cargoconsultaarticulo_by").focus();
            }
            return false;
        }else{
            $("span#cargoconsultaarticulo_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoconsultaarticulo_by=' + cargoconsultaarticulo_by + '&busquedaArticulo=' + busquedaArticulo ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                ordencompradetalleArray = []
                var ordencompradetalleEntity = data.ordencompradetalleArray;
                $.each( ordencompradetalleEntity, function( key, value ) {
                    ordencompradetalleArray.push({
                        "idordencompradetalle" : value.idordencompradetalle,
                        "idlugarinventario" : value.idlugarinventario,
                        "cargoconsulta_tipo" : value.cargoconsulta_tipo,
                        "cargoconsulta_fecha" : value.cargoconsulta_fecha,
                        "caducidad" : value.ordencompradetalle_caducidad,
                        "existencia" : value.existencia,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "salida" : value.salida
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarConsultaArticulo(ordencompradetalleArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                $.each(ordencompradetalleArray, function(keys, values){

                    // Mantenemos el foco en el artículo que se esta agregando
                    if(idordencompradetalle == values.idordencompradetalle){
                        if ($('#fieldsetCargoconsultaArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoconsultaArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoconsulta_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoconsulta
                        var div = document.getElementById("fieldsetCargoconsultaArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoconsultaTipo')){
                            var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                            divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoconsultaFecha')){
                            var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                            divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                        }
                        // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                        var form = document.getElementById('CargoconsultaForm');

                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaTipo = document.createElement('div');
                        divinputCargoconsultaTipo.className = "input-field";
                        divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                        var inputCargoconsultaTipo = document.createElement('input');
                        inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                        divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaFecha = document.createElement('div');
                        divinputCargoconsultaFecha.className = "input-field";
                        divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                        var inputCargoconsultaFecha = document.createElement('input');
                        inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                        divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    }

                    // Si dan clic a una entidad de la colección
                    $("#entidadArticulo-"+values.idordencompradetalle).click(function(){
                        if ($('#fieldsetCargoconsultaArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoconsultaArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoconsulta_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoconsulta
                        var div = document.getElementById("fieldsetCargoconsultaArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoconsultaTipo')){
                            var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                            divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoconsultaFecha')){
                            var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                            divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                        }
                        // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                        var form = document.getElementById('CargoconsultaForm');

                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaTipo = document.createElement('div');
                        divinputCargoconsultaTipo.className = "input-field";
                        divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                        var inputCargoconsultaTipo = document.createElement('input');
                        inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                        divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaFecha = document.createElement('div');
                        divinputCargoconsultaFecha.className = "input-field";
                        divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                        var inputCargoconsultaFecha = document.createElement('input');
                        inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                        divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    });
                });
            },
            error: function(){
                $('#modalCargoconsultaArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    };
    function buscarCargoconsultaServicio(idservicio){

        //Obtenemos el valor del selector de lugarinventario
        var busquedaServicio = $("input#busquedaServicio").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoconsultaservicio_by = $("select#cargoconsultaservicio_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoconsultaservicio_by == "") {
            if ($('span#cargoconsultaservicio_by_error').hasClass('hidden')){
                $('span#cargoconsultaservicio_by_error').removeClass('hidden');
                $("span#cargoconsultaservicio_by_error").show();
                $("span#cargoconsultaservicio_by").focus();
            }
            return false;
        }else{
            $("span#cargoconsultaservicio_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoconsultaservicio_by=' + cargoconsultaservicio_by + '&busquedaServicio=' + busquedaServicio ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                servicioArray = []
                var servicioEntity = data.servicioArray
                $.each( servicioEntity, function( key, value ) {
                    servicioArray.push({
                        "idservicio" : value.idservicio,
                        "cargoconsulta_tipo" : value.cargoconsulta_tipo,
                        "cargoconsulta_fecha" : value.cargoconsulta_fecha,
                        "servicio_nombre" : value.servicio_nombre,
                        "servicio_descripcion" : value.servicio_descripcion,
                        "servicio_precio" : value.servicio_precio
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarConsultaServicio(servicioArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                $.each(servicioArray, function(keys, values){
                    // Mantenemos el foco en el servicio que se esta agregando
                    if(idservicio == values.idservicio){
                        if ($('#fieldsetCargoconsultaServicio').hasClass('hiddendiv')){
                            $('#fieldsetCargoconsultaServicio').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        // Creamos el input de cantidad de tipo input
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var inputCantidad = document.createElement('input');
                        inputCantidad.setAttribute ( 'id', 'cantidad' );
                        inputCantidad.style.width = "20%";
                        inputCantidad.type = "number";
                        inputCantidad.min ="1";
                        inputCantidad.max = "999999999";
                        divinputCantidad.appendChild(inputCantidad);

                        // Creamos la entidad textual lista para agregar al cargoconsulta
                        var div = document.getElementById("fieldsetCargoconsultaServicioEntity");
                        div.innerHTML = div.dir;
                        var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                        var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                        var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                        var textoCargoconsultaFecha = document.createTextNode("Fecha: "+values.cargoconsulta_fecha);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoServicioNombre);
                        div.appendChild(br);
                        div.appendChild(textoServicioDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoServicioPrecio);
                        div.appendChild(br3);
                        div.appendChild(textoCargoconsultaFecha);
                        div.appendChild(br4);
                        div.appendChild(textoCantidad);
                        div.appendChild(inputCantidad);

                        // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idservicio lo eliminamos
                        if(document.getElementById('divinputIdservicio')){
                            var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                            divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                        }

                        // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                        if(document.getElementById('divinputCargoconsultaTipo')){
                            var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                            divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                        }
                        // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                        if(document.getElementById('divinputCargoconsultaFecha')){
                            var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                            divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                        var form = document.getElementById('CargoconsultaForm');
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdservicio = document.createElement('div');
                        divinputIdservicio.className = "input-field";
                        divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                        var inputIdservicio = document.createElement('input');
                        inputIdservicio.setAttribute ( 'id', 'idservicio' );
                        inputIdservicio.setAttribute ( 'type', 'hidden' );
                        inputIdservicio.setAttribute ( 'name', 'idservicio' );
                        inputIdservicio.setAttribute ( 'value', values.idservicio );
                        divinputIdservicio.appendChild(inputIdservicio)
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaTipo = document.createElement('div');
                        divinputCargoconsultaTipo.className = "input-field";
                        divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                        var inputCargoconsultaTipo = document.createElement('input');
                        inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                        inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                        divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                        // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                        var divinputCargoconsultaFecha = document.createElement('div');
                        divinputCargoconsultaFecha.className = "input-field";
                        divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                        var inputCargoconsultaFecha = document.createElement('input');
                        inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                        inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                        divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaFecha);
                        form.appendChild(divinputCargoconsultaTipo);
                        form.appendChild(divinputIdservicio);
                    }

                    // Si dan clic a una entidad de la colección

                    // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                    $.each(servicioArray, function(keys, values){
                        // Si dan clic a una entidad de la colección
                        $("#entidadServicio-"+values.idservicio).click(function(){
                            if ($('#fieldsetCargoconsultaServicio').hasClass('hiddendiv')){
                                $('#fieldsetCargoconsultaServicio').removeClass('hiddendiv')
                            }
                            var br   = document.createElement("br");
                            var br2   = document.createElement("br");
                            var br3   = document.createElement("br");
                            var br4   = document.createElement("br");
                            // Creamos el input de cantidad de tipo input
                            var divinputCantidad = document.createElement('div');
                            divinputCantidad.className = "input-field";
                            divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                            var inputCantidad = document.createElement('input');
                            inputCantidad.setAttribute ( 'id', 'cantidad' );
                            inputCantidad.style.width = "20%";
                            inputCantidad.type = "number";
                            inputCantidad.min ="1";
                            inputCantidad.max = "999999999";
                            divinputCantidad.appendChild(inputCantidad);

                            // Creamos la entidad textual lista para agregar al cargoconsulta
                            var div = document.getElementById("fieldsetCargoconsultaServicioEntity");
                            div.innerHTML = div.dir;
                            var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                            var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                            var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                            var textoCargoconsultaFecha = document.createTextNode("Fecha: "+values.cargoconsulta_fecha);
                            var textoCantidad = document.createTextNode("Cantidad: ");
                            div.appendChild(textoServicioNombre);
                            div.appendChild(br);
                            div.appendChild(textoServicioDescripcion);
                            div.appendChild(br2);
                            div.appendChild(textoServicioPrecio);
                            div.appendChild(br3);
                            div.appendChild(textoCargoconsultaFecha);
                            div.appendChild(br4);
                            div.appendChild(textoCantidad);
                            div.appendChild(inputCantidad);

                            // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                            // Si el formulario ya tiene el input de idservicio lo eliminamos
                            if(document.getElementById('divinputIdservicio')){
                                var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                                divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                            }

                            // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                            if(document.getElementById('divinputCargoconsultaTipo')){
                                var divinputCargoconsultaTipoDelete = document.getElementById("divinputCargoconsultaTipo");
                                divinputCargoconsultaTipoDelete.parentNode.removeChild(divinputCargoconsultaTipoDelete);
                            }
                            // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                            if(document.getElementById('divinputCargoconsultaFecha')){
                                var divinputCargoconsultaFechaDelete = document.getElementById("divinputCargoconsultaFecha");
                                divinputCargoconsultaFechaDelete.parentNode.removeChild(divinputCargoconsultaFechaDelete);
                            }

                            // Creamos nuestro Formulario con los datos a insertar en Cargoconsulta
                            var form = document.getElementById('CargoconsultaForm');
                            // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                            var divinputIdservicio = document.createElement('div');
                            divinputIdservicio.className = "input-field";
                            divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                            var inputIdservicio = document.createElement('input');
                            inputIdservicio.setAttribute ( 'id', 'idservicio' );
                            inputIdservicio.setAttribute ( 'type', 'hidden' );
                            inputIdservicio.setAttribute ( 'name', 'idservicio' );
                            inputIdservicio.setAttribute ( 'value', values.idservicio );
                            divinputIdservicio.appendChild(inputIdservicio)
                            // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                            var divinputCargoconsultaTipo = document.createElement('div');
                            divinputCargoconsultaTipo.className = "input-field";
                            divinputCargoconsultaTipo.setAttribute ( 'id', 'divinputCargoconsultaTipo' );
                            var inputCargoconsultaTipo = document.createElement('input');
                            inputCargoconsultaTipo.setAttribute ( 'id', 'cargoconsulta_tipo' );
                            inputCargoconsultaTipo.setAttribute ( 'type', 'hidden' );
                            inputCargoconsultaTipo.setAttribute ( 'name', 'cargoconsulta_tipo' );
                            inputCargoconsultaTipo.setAttribute ( 'value', values.cargoconsulta_tipo );
                            divinputCargoconsultaTipo.appendChild(inputCargoconsultaTipo);
                            // Creamos el input de cargoconsulta_tipo y le seteamos el valor que le corresponde
                            var divinputCargoconsultaFecha = document.createElement('div');
                            divinputCargoconsultaFecha.className = "input-field";
                            divinputCargoconsultaFecha.setAttribute ( 'id', 'divinputCargoconsultaFecha' );
                            var inputCargoconsultaFecha = document.createElement('input');
                            inputCargoconsultaFecha.setAttribute ( 'id', 'cargoconsulta_fecha' );
                            inputCargoconsultaFecha.setAttribute ( 'type', 'hidden' );
                            inputCargoconsultaFecha.setAttribute ( 'name', 'cargoconsulta_fecha' );
                            inputCargoconsultaFecha.setAttribute ( 'value', values.cargoconsulta_fecha );
                            divinputCargoconsultaFecha.appendChild(inputCargoconsultaFecha);
                            form.appendChild(divinputCargoconsultaFecha);
                            form.appendChild(divinputCargoconsultaTipo);
                            form.appendChild(divinputIdservicio);
                        });
                    });
                });
            },
            error: function(){
                $('#modalCargoconsultaServicio').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    };

    function tablaCargoconsultaArticuloAgregadoInicial(cargoconsultaArray) {

        var totalArticulo = 0;
        var iva = 0;
        // Obtener la referencia del elemento div con id = cargoconsultaArticuloResult
        var div = document.getElementById("cargoconsultaArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Artículo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            totalArticulo += parseFloat(cargoconsultaArray[i]["total"]);
            iva += parseFloat(cargoconsultaArray[i]["iva"]);
            var status = cargoconsultaArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);
                    <!-- Modal Trigger -->

                    <!-- View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p7.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol7.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p8);
                    divCol8.appendChild(divLabelContainer8);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoconsulta = cargoconsultaArray[i]["idcargoconsulta"]
            var idconsulta = cargoconsultaArray[i]["idconsulta"]
            var cantidad = cargoconsultaArray[i]["cantidad"]

            // Si dan clic en eliminarCargoconsulta-id
            $("#eliminarCargoconsulta-"+idcargoconsulta).click({idcargoconsulta:idcargoconsulta, idconsulta:idconsulta, cantidad:cantidad},function() {

                var split = $(this).attr('id').split('-')
                idcargoconsulta = split[1]

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoconsulta_tipo=articulo' + '&idcargoconsulta=' + idcargoconsulta + '&idconsulta=' + idconsulta + '&cantidad=' + cantidad;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un articulo")
                        $('#delete-modal-cargoadmision-'+idcargoconsulta).closeModal();

                        cargoconsultaArray = []
                        var cargoconsultaEntity = data.cargoconsultaArray
                        if(cargoconsultaEntity){
                            $.each( cargoconsultaEntity, function( key, value ) {
                                cargoconsultaArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }

                        tablaCargoconsultaArticuloEliminado(cargoconsultaArray)
                        tablaCargoconsultaArticuloAgregadoModal(cargoconsultaArray)
                        cargoconsultaEliminadoArray = []
                        var cargoconsultaEliminado = data.cargoconsultaEliminadoArray
                        if(cargoconsultaEliminado){
                            $.each( cargoconsultaEliminado, function( key, value ) {
                                cargoconsultaEliminadoArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }

                        totalResponse('eliminar', cargoconsultaEliminadoArray[0]['iva'], status, -(cargoconsultaEliminadoArray[0]['total']), null, 'consulta')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoconsulta")
                    }
                });
                return false;

            });
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, totalArticulo, null, 'consulta')

        var dataStringVerConsultaanticipo = "ver_consultaanticipo=true" + "&idconsulta=" + idconsulta;
        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringVerConsultaanticipo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                consultaanticipoArray = []
                var consultaanticipoEntity = data.consultaanticipoArray
                if(consultaanticipoEntity){
                    $.each( consultaanticipoEntity, function( key, value ) {
                        consultaanticipoArray.push({
                            "idconsultaanticipo" : value.idconsultaanticipo,
                            "idconsulta" : value.idconsulta,
                            "consultaanticipo_fecha" : value.consultaanticipo_fecha,
                            "consultaanticipo_cantidad" : value.consultaanticipo_cantidad,
                            "consultaanticipo_nota" : value.consultaanticipo_nota,
                            "consultaanticipo_tipo" : value.consultaanticipo_tipo
                        });
                    });
                }

                // Si no existe un cargo de servicio, construimos Anticipo: $$$ MXN, de lo contrario. lo constriye tablaCargoconsultaServicioAgregadoInicial
                if(data.existeServicioConsulta == false){
                    var AnticipoCantidad = 0;
                    for(count=0; count<=consultaanticipoArray.length; count++){
                        AnticipoCantidad = Number(consultaanticipoArray[count]["consultaanticipo_cantidad"]);
                        totalResponse('resta', null, status, -AnticipoCantidad, null, 'consulta', AnticipoCantidad)
                    }
                }
            },
            error: function(){
                //alert("Error al intentar actualizar Anticipos")
            }
        });

    }

    function tablaCargoconsultaArticuloAgregado(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = cargoconsultaArticuloResult
        var div = document.getElementById("cargoconsultaArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Artículo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            var totalArticulo = parseFloat(cargoconsultaArray[i]["total"]);
            var iva = parseFloat(cargoconsultaArray[i]["iva"]);
            var status = cargoconsultaArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]['total']);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);
                    <!-- Modal Trigger -->

                    <!-- View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p6.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol8.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p8);
                    divCol8.appendChild(divLabelContainer8);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoconsulta = cargoconsultaArray[i]["idcargoconsulta"]
            var idconsulta = cargoconsultaArray[i]["idconsulta"]
            var cantidad = cargoconsultaArray[i]["cantidad"]

            // Si dan clic en eliminarCargoconsulta-id
            $("#eliminarCargoconsulta-"+idcargoconsulta).click({idcargoconsulta:idcargoconsulta, idconsulta:idconsulta, cantidad:cantidad},function() {

                var split = $(this).attr('id').split('-')
                idcargoconsulta = split[1]

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoconsulta_tipo=articulo' + '&idcargoconsulta=' + idcargoconsulta + '&idconsulta=' + idconsulta + '&cantidad=' + cantidad;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un articulo")
                        $('#delete-modal-cargoadmision-'+idcargoconsulta).closeModal();

                        cargoconsultaArray = []
                        var cargoconsultaEntity = data.cargoconsultaArray
                        if(cargoconsultaEntity){
                            $.each( cargoconsultaEntity, function( key, value ) {
                                cargoconsultaArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva": value.iva,
                                    "total": value.total
                                });
                            });
                        }

                        tablaCargoconsultaArticuloEliminado(cargoconsultaArray)
                        tablaCargoconsultaArticuloAgregadoModal(cargoconsultaArray)
                        cargoconsultaEliminadoArray = []
                        var cargoconsultaEliminado = data.cargoconsultaEliminadoArray
                        if(cargoconsultaEliminado){
                            $.each( cargoconsultaEliminado, function( key, value ) {
                                cargoconsultaEliminadoArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva": value.iva,
                                    "total": value.total
                                });
                            });
                        }
                        totalResponse('eliminar', cargoconsultaEliminadoArray[0]['iva'], status, -(cargoconsultaEliminadoArray[0]['total']), null, 'consulta')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoconsulta")
                    }
                });
                return false;

            });
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, totalArticulo, null, 'consulta')

    }

    function tablaCargoconsultaArticuloEliminado(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = cargoconsultaArticuloResult
        var div = document.getElementById("cargoconsultaArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Artículo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                    <!-- View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p7.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol8.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsulta-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->

                }
            }
            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);
    }

    function tablaCargoconsultaServicioAgregadoInicial(cargoconsultaArray) {

        var totalServicio = 0;
        var iva = 0;
        // Obtener la referencia del elemento div con id = cargoconsultaServicioResult
        var div = document.getElementById("cargoconsultaServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            totalServicio += parseFloat(cargoconsultaArray[i]["total"]);
            iva += parseFloat(cargoconsultaArray[i]["iva"]);
            var status = cargoconsultaArray[i]["status"];
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- Start View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Modal Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsultaServicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoconsulta = cargoconsultaArray[i]["idcargoconsulta"]
            var idconsulta = cargoconsultaArray[i]["idconsulta"]

            // Si dan clic en eliminarCargoconsultaServicio-id
            $("#eliminarCargoconsultaServicio-"+idcargoconsulta).click({idcargoconsulta:idcargoconsulta, idconsulta:idconsulta},function() {

                var split = $(this).attr('id').split('-')
                idcargoconsulta = split[1]

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoconsulta_tipo=servicio' + '&idcargoconsulta=' + idcargoconsulta + '&idconsulta=' + idconsulta;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un servicio")
                        $('#delete-modal-cargoconsulta-servicio-'+idcargoconsulta).closeModal();
                        cargoconsultaArray = []
                        var cargoconsultaEntity = data.cargoconsultaArray
                        if(cargoconsultaEntity){
                            $.each( cargoconsultaEntity, function( key, value ) {
                                cargoconsultaArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        tablaCargoconsultaServicioEliminado(cargoconsultaArray)
                        tablaCargoconsultaServicioAgregadoModal(cargoconsultaArray)
                        cargoconsultaEliminadoArray = []
                        var cargoconsultaEliminado = data.cargoconsultaEliminadoArray
                        if(cargoconsultaEliminado){
                            $.each( cargoconsultaEliminado, function( key, value ) {
                                cargoconsultaEliminadoArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }
                        totalResponse('eliminar', cargoconsultaEliminadoArray[0]['iva'], status, null, -(cargoconsultaEliminadoArray[0]['total']), 'consulta')
                    },
                    error: function(){
                        alert("Error al intentar eliminar cargo de un servicio")
                    }
                });
                return false;

            });

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        if (typeof(status) === "undefined") {

        }else{
            totalResponse('igual', iva, status, null, totalServicio, 'consulta')
        }

        var dataStringVerConsultaanticipo = "ver_consultaanticipo=true" + "&idconsulta=" + idconsulta;
        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringVerConsultaanticipo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                consultaanticipoArray = []
                var consultaanticipoEntity = data.consultaanticipoArray
                if(consultaanticipoEntity){
                    $.each( consultaanticipoEntity, function( key, value ) {
                        consultaanticipoArray.push({
                            "idconsultaanticipo" : value.idconsultaanticipo,
                            "idconsulta" : value.idconsulta,
                            "consultaanticipo_fecha" : value.consultaanticipo_fecha,
                            "consultaanticipo_cantidad" : value.consultaanticipo_cantidad,
                            "consultaanticipo_nota" : value.consultaanticipo_nota,
                            "consultaanticipo_tipo" : value.consultaanticipo_tipo
                        });
                    });
                }

                var AnticipoCantidad = 0;
                for(count=0; count<=consultaanticipoArray.length; count++){
                    AnticipoCantidad = Number(consultaanticipoArray[count]["consultaanticipo_cantidad"]);
                    totalResponse('resta', null, status, -AnticipoCantidad, null, 'consulta', AnticipoCantidad)
                }

            },
            error: function(){
                //alert("Error al intentar actualizar Anticipos")
            }
        });
    }

    function tablaCargoconsultaServicioAgregado(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = cargoconsultaServicioResult
        var div = document.getElementById("cargoconsultaServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            var totalServicio = parseFloat(cargoconsultaArray[i]["total"]);
            var iva = parseFloat(cargoconsultaArray[i]["iva"]);
            var status = cargoconsultaArray[i]["status"];
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- Start View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Modal Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsultaServicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoconsulta = cargoconsultaArray[i]["idcargoconsulta"]
            var idconsulta = cargoconsultaArray[i]["idconsulta"]

            // Si dan clic en eliminarCargoconsultaServicio-id
            $("#eliminarCargoconsultaServicio-"+idcargoconsulta).click({idcargoconsulta:idcargoconsulta, idconsulta:idconsulta},function() {

                var split = $(this).attr('id').split('-')
                idcargoconsulta = split[1]

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoconsulta_tipo=servicio' + '&idcargoconsulta=' + idcargoconsulta + '&idconsulta=' + idconsulta;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un servicio")
                        $('#delete-modal-cargoconsulta-servicio-'+idcargoconsulta).closeModal();
                        cargoconsultaArray = []
                        var cargoconsultaEntity = data.cargoconsultaArray
                        if(cargoconsultaEntity){
                            $.each( cargoconsultaEntity, function( key, value ) {
                                cargoconsultaArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        tablaCargoconsultaServicioEliminado(cargoconsultaArray)
                        tablaCargoconsultaServicioAgregadoModal(cargoconsultaArray)
                        cargoconsultaEliminadoArray = []
                        var cargoconsultaEliminado = data.cargoconsultaEliminadoArray
                        if(cargoconsultaEliminado){
                            $.each( cargoconsultaEliminado, function( key, value ) {
                                cargoconsultaEliminadoArray.push({
                                    "idcargoconsulta" : value.idcargoconsulta,
                                    "idconsulta" : value.idconsulta,
                                    "status" : value.status,
                                    "cantidad" : value.cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }
                        totalResponse('eliminar', cargoconsultaEliminadoArray[0]['iva'], status, null, -(cargoconsultaEliminadoArray[0]['total']), 'consulta')
                    },
                    error: function(){
                        alert("Error al intentar eliminar cargo de un servicio")
                    }
                });
                return false;

            });

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, null, totalServicio, 'consulta')
    }

    function tablaCargoconsultaServicioEliminado(cargoconsultaArray) {

        // Obtener la referencia del elemento div con id = cargoconsultaServicioResult
        var div = document.getElementById("cargoconsultaServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoconsultaArray.length; i++) {

            var totalServicio = parseFloat(cargoconsultaArray[i]["total"]);
            var status = cargoconsultaArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoconsultaArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- View Modal Structure -->
                    var divcargosConsulta = document.getElementById('cargosConsulta')
                    var divViewModalCargoconsulta = document.createElement('div')
                    divViewModalCargoconsulta.setAttribute ( 'id', 'view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divViewModalCargoconsulta.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoconsulta.appendChild(br);
                    divViewModalCargoconsulta.appendChild(h4);
                    divViewModalCargoconsulta.appendChild(divRow);
                    divViewModalCargoconsulta.appendChild(divViewModalFooter);
                    divcargosConsulta.appendChild(divViewModalCargoconsulta);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosConsultaDelete = document.getElementById('cargosConsulta')
                    var divDeleteModalCargoconsultaDelete = document.createElement('div')
                    divDeleteModalCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    divDeleteModalCargoconsultaDelete.className = "modal";
                    var divDeleteModalContentCargoconsultaDelete = document.createElement('div')
                    divDeleteModalContentCargoconsultaDelete.setAttribute ( 'id', 'delete-modal-cargoconsulta-servicio');
                    divDeleteModalContentCargoconsultaDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoconsultaArray[i]["cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoconsultaArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoconsultaArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoconsultaArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoconsultaArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoconsultaArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoconsultaDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalContentCargoconsultaDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoconsultaServicio-'+cargoconsultaArray[i]["idcargoconsulta"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoconsultaDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosConsultaDelete.appendChild(divDeleteModalCargoconsultaDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'VisualizarConsulta' );
                    link1.setAttribute ( 'href', '#view-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarConsulta' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoconsulta-servicio-'+cargoconsultaArray[i]["idcargoconsulta"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);
    }





    //// ADMISION ////

    $("#buscarCargoadmisionArticulo").click(function() {

        //Obtenemos el valor del selector de lugarinventario
        var busquedaAdmisionArticulo = $("input#busquedaAdmisionArticulo").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoadmisionarticulo_by = $("select#cargoadmisionarticulo_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoadmisionarticulo_by == "") {
            if ($('span#cargoadmisionarticulo_by_error').hasClass('hidden')){
                $('span#cargoadmisionarticulo_by_error').removeClass('hidden');
                $("span#cargoadmisionarticulo_by_error").show();
                $("span#cargoadmisionarticulo_by").focus();
            }
            return false;
        }else{
            $("span#cargoadmisionarticulo_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoadmisionarticulo_by=' + cargoadmisionarticulo_by + '&busquedaAdmisionArticulo=' + busquedaAdmisionArticulo ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                ordencompradetalleArray = []
                var ordencompradetalleEntity = data.ordencompradetalleArray
                $.each( ordencompradetalleEntity, function( key, value ) {
                    ordencompradetalleArray.push({
                        "idordencompradetalle" : value.idordencompradetalle,
                        "idlugarinventario" : value.idlugarinventario,
                        "cargoadmision_tipo" : value.cargoadmision_tipo,
                        "cargoadmision_fecha" : value.cargoadmision_fecha,
                        "caducidad" : value.ordencompradetalle_caducidad,
                        "existencia" : value.existencia,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "salida" : value.salida
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarAdmisionArticulo(ordencompradetalleArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoadmision
                $.each(ordencompradetalleArray, function(keys, values){
                    // Si dan clic a una entidad de la colección
                    $("#entidadArticulo-"+values.idordencompradetalle).click(function(){
                        if ($('#fieldsetCargoadmisionArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoadmisionArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cargoadmision_cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoadmision_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoadmision
                        var div = document.getElementById("fieldsetCargoadmisionArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de cargoadmision_tipo lo eliminamos
                        if(document.getElementById('divinputCargoadmisionTipo')){
                            var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                            divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                        }
                        // Si el formulario ya tiene el input de cargoadmision_fecha lo eliminamos
                        if(document.getElementById('divinputCargoadmisionFecha')){
                            var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                            divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                        var form = document.getElementById('CargoadmisionForm');
                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionTipo = document.createElement('div');
                        divinputCargoadmisionTipo.className = "input-field";
                        divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                        var inputCargoadmisionTipo = document.createElement('input');
                        inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                        divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionFecha = document.createElement('div');
                        divinputCargoadmisionFecha.className = "input-field";
                        divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                        var inputCargoadmisionFecha = document.createElement('input');
                        inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                        divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    });
                });
            },
            error: function(){
                $('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    });

    $("#buscarCargoadmisionServicio").click(function() {

        //Obtenemos el valor del selector de lugarinventario
        var busquedaAdmisionServicio = $("input#busquedaAdmisionServicio").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoadmisionservicio_by = $("select#cargoadmisionservicio_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoadmisionservicio_by == "") {
            if ($('span#cargoadmisionservicio_by_error').hasClass('hidden')){
                $('span#cargoadmisionservicio_by_error').removeClass('hidden');
                $("span#cargoadmisionservicio_by_error").show();
                $("span#cargoadmisionservicio_by").focus();
            }
            return false;
        }else{
            $("span#cargoadmisionservicio_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoadmisionservicio_by=' + cargoadmisionservicio_by + '&busquedaAdmisionServicio=' + busquedaAdmisionServicio ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                servicioArray = []
                var servicioEntity = data.servicioArray
                $.each( servicioEntity, function( key, value ) {
                    servicioArray.push({
                        "idservicio" : value.idservicio,
                        "cargoadmision_tipo" : value.cargoadmision_tipo,
                        "cargoadmision_fecha" : value.cargoadmision_fecha,
                        "servicio_nombre" : value.servicio_nombre,
                        "servicio_descripcion" : value.servicio_descripcion,
                        "servicio_precio" : value.servicio_precio
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarAdmisionServicio(servicioArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoadmision
                $.each(servicioArray, function(keys, values){
                    // Si dan clic a una entidad de la colección
                    $("#entidadServicio-"+values.idservicio).click(function(){
                        if ($('#fieldsetCargoadmisionServicio').hasClass('hiddendiv')){
                            $('#fieldsetCargoadmisionServicio').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        // Creamos el input de cantidad de tipo input
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var inputCantidad = document.createElement('input');
                        inputCantidad.setAttribute ( 'id', 'cargoadmision_cantidad' );
                        inputCantidad.style.width = "20%";
                        inputCantidad.type = "number";
                        inputCantidad.min ="1";
                        inputCantidad.max = "999999999";

                        // agregamos las options en nuestro input
                        divinputCantidad.appendChild(inputCantidad);

                        // Creamos la entidad textual lista para agregar al cargoadmision
                        var div = document.getElementById("fieldsetCargoadmisionServicioEntity");
                        div.innerHTML = div.dir;
                        var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                        var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                        var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                        var textoCargoadmisionFecha = document.createTextNode("Fecha: "+values.cargoadmision_fecha);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoServicioNombre);
                        div.appendChild(br);
                        div.appendChild(textoServicioDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoServicioPrecio);
                        div.appendChild(br3);
                        div.appendChild(textoCargoadmisionFecha);
                        div.appendChild(br4);
                        div.appendChild(textoCantidad);
                        div.appendChild(inputCantidad);

                        // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idservicio lo eliminamos
                        if(document.getElementById('divinputIdservicio')){
                            var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                            divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                        }

                        // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                        if(document.getElementById('divinputCargoadmisionTipo')){
                            var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                            divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                        }
                        // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                        if(document.getElementById('divinputCargoadmisionFecha')){
                            var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                            divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                        var form = document.getElementById('CargoadmisionForm');
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdservicio = document.createElement('div');
                        divinputIdservicio.className = "input-field";
                        divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                        var inputIdservicio = document.createElement('input');
                        inputIdservicio.setAttribute ( 'id', 'idservicio' );
                        inputIdservicio.setAttribute ( 'type', 'hidden' );
                        inputIdservicio.setAttribute ( 'name', 'idservicio' );
                        inputIdservicio.setAttribute ( 'value', values.idservicio );
                        divinputIdservicio.appendChild(inputIdservicio)
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionTipo = document.createElement('div');
                        divinputCargoadmisionTipo.className = "input-field";
                        divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                        var inputCargoadmisionTipo = document.createElement('input');
                        inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                        divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionFecha = document.createElement('div');
                        divinputCargoadmisionFecha.className = "input-field";
                        divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                        var inputCargoadmisionFecha = document.createElement('input');
                        inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                        divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionTipo);
                        form.appendChild(divinputIdservicio);
                    });
                });
            },
            error: function(){
                $('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    });


    function generaTablaBuscarAdmisionArticulo(ordencompradetalleArray) {

        // Obtener la referencia del elemento div con id = tablaCargoadmisionArticulo
        var div = document.getElementById("tablaCargoadmisionArticulo");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <thead> y <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");
        var thArray = ['Existencias', 'Articulo', 'Descripción', 'Precio', 'Salida']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <th> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <th>, ubica el elemento <th> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <table>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < ordencompradetalleArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");
            hilera.className = "pointer";
            // Le agregamos un id a la entidad <th>
            hilera.setAttribute('id', 'entidadArticulo-' + ordencompradetalleArray[i]["idordencompradetalle"])

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["existencia"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode("$"+ordencompradetalleArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(ordencompradetalleArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <div>
        div.appendChild(tabla);
    }

    function generaTablaBuscarAdmisionServicio(servicioArray) {

        // Obtener la referencia del elemento div con id = tablaCargoadmisionArticulo
        var div = document.getElementById("tablaCargoadmisionServicio");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <thead> y <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");
        var thArray = ['Servicio', 'Descripción', 'Precio']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <th> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <th>, ubica el elemento <th> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <table>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < servicioArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");
            hilera.className = "pointer";
            // Le agregamos un id a la entidad <th>
            hilera.setAttribute('id', 'entidadServicio-' + servicioArray[i]["idservicio"])

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_nombre"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(servicioArray[i]["servicio_precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <div>
        div.appendChild(tabla);
    }

    $("#guardarCargoadmisionArticulo").click(function() {

        // Actializar existencias
        //Obtenemos el valor del selector de admision
        var idordencompradetalle = $("input#idordencompradetalle").val();
        // Actializar existencias

        //Obtenemos el valor del selector de consadmisionulta
        var idadmision = $("input#idadmision").val();
        //Obtenemos el valor del selector de lugarinventario
        var idlugarinventario = $("input#idlugarinventario").val();
        //Obtenemos el valor del campo cargoadmision_tipo
        var cargoadmision_tipo = $("input#cargoadmision_tipo").val();
        //Obtenemos el valor del campo cargoadmision_fecha
        var cargoadmision_fecha = $("input#cargoadmision_fecha").val();
        //Obtenemos el valor del campo cantidad
        var cargoadmision_cantidad = $("select#cargoadmision_cantidad").val();

        if(cargoadmision_cantidad == null){
            //$('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar. Ya no hay artículos en existencia.</div>')
            alert("Error al intentar agregar. No hay artículos en existencia");
            return false;
        }

        //Obtenemos el valor del campo cargoconsulta_tipo
        var cargoadmision_destino = $("select#cargoadmision_destino").val();

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'idadmision=' + idadmision + '&idlugarinventario=' + idlugarinventario + '&cargoadmision_tipo=' + cargoadmision_tipo + '&cargoadmision_fecha=' + cargoadmision_fecha + '&cargoadmision_cantidad=' + cargoadmision_cantidad + '&cargoadmision_destino=' + cargoadmision_destino;

        console.log(dataString);
        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                //$('#cargosAdmision').prepend('<div class="card-panel #00086E-text green accent-2 guardado-ajax"">Cargo guardada exitosamente</div>')
                //$('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text green accent-2 guardado-modal-ajax"">Cargo agregado exitosamente</div>')
                //alert("Cargo agregado exitosamente");

                //console.log(data.cargoadmisionArray);
                cargoadmisionArray = []
                var cargoadmisionEntity = data.cargoadmisionArray
                $.each( cargoadmisionEntity, function( key, value ) {
                    cargoadmisionArray.push({
                        "idcargoadmision" : value.idcargoadmision,
                        "idadmision" : value.idadmision,
                        "status" : value.status,
                        "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "salida" : value.salida,
                        "destino" : value.destino,
                        "fechahora" : value.fechahora,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total
                    });
                });

                if ($('#cargoadmisionArticuloResult').hasClass('hiddendiv')){
                    $('#cargoadmisionArticuloResult').removeClass('hiddendiv')
                }

                tablaCargoadmisionArticuloAgregadoModal(cargoadmisionArray);
                tablaCargoadmisionArticuloAgregado(cargoadmisionArray);
                // Refrescamos
                buscarCargoadmisionArticulo(idordencompradetalle);

            },
            error: function(){
                //$('#cargosAdmision').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar guardar</div>')
                //$('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar</div>')
                alert("Error al intentar agregar");
            }
        });

        return false;
    });

    $("#guardarCargoadmisionServicio").click(function() {

        //Obtenemos el valor del selector de admision
        var idadmision = $("input#idadmision").val();
        //Obtenemos el valor del selector de lugarinventario
        var idservicio = $("input#idservicio").val();
        //Obtenemos el valor del campo cargoadmision_tipo
        var cargoadmision_tipo = $("input#cargoadmision_tipo").val();
        //Obtenemos el valor del campo cargoadmision_fecha
        var cargoadmision_fecha = $("input#cargoadmision_fecha").val();
        //Obtenemos el valor del campo cantidad
        var cargoadmision_cantidad = $("input#cargoadmision_cantidad").val();

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'idadmision=' + idadmision + '&idservicio=' + idservicio + '&cargoadmision_tipo=' + cargoadmision_tipo + '&cargoadmision_fecha=' + cargoadmision_fecha + '&cargoadmision_cantidad=' + cargoadmision_cantidad;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            jsonpCallback: 'callback',
            success: function(data) {
                //$('#cargosAdmision').prepend('<div class="card-panel #00086E-text green accent-2 guardado-ajax"">Cargo guardada exitosamente</div>')
                //$('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text green accent-2 guardado-modal-ajax"">Cargo agregado exitosamente</div>')
                //alert("Cargo agregado exitosamente");

                //console.log(data.cargoadmisionArray);
                cargoadmisionArray = []
                var cargoadmisionEntity = data.cargoadmisionArray
                $.each( cargoadmisionEntity, function( key, value ) {
                    cargoadmisionArray.push({
                        "idcargoadmision" : value.idcargoadmision,
                        "idadmision" : value.idadmision,
                        "status" : value.status,
                        "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                        "servicio" : value.servicio,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "subtotal" : value.subtotal,
                        "iva" : value.iva,
                        "total" : value.total,
                        "fechahora" : value.fechahora
                    });
                });

                if ($('#cargoadmisionServicioResult').hasClass('hiddendiv')){
                    $('#cargoadmisionServicioResult').removeClass('hiddendiv')
                }

                tablaCargoadmisionServicioAgregadoModal(cargoadmisionArray);
                tablaCargoadmisionServicioAgregado(cargoadmisionArray);

                // Refrescamos
                buscarCargoadmisionServicio(idservicio);

            },
            error: function(){
                //$('#cargosAdmision').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar guardar</div>')
                //$('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 error-modal-ajax">Error al intentar agregar</div>')
                alert("Error al intentar agregar");
            }
        });

        return false;
    });

    function tablaCargoadmisionArticuloAgregadoModal(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = tablaCargoadmisionArticuloAgregado
        var div = document.getElementById("tablaCargoadmisionArticuloAgregado");
        div.innerHTML = div.dir;
        // Creamos el elemento <table>
        var tabla   = document.createElement("table");
        // Agregamos clases el elemento <table>
        tabla.className = "hoverable striped";
        // Creamos el elemento <thead>
        var tblHead = document.createElement("thead");
        // Creamos el elemento <tbody>
        var tblBody = document.createElement("tbody");

        // Creamos un array con las columnas de nuestra tabla
        var thArray = ['Cantidad', 'Articulo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

    }
    function tablaCargoadmisionServicioAgregadoModal(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = tablaCargoadmisionServicioAgregado
        var div = document.getElementById("tablaCargoadmisionServicioAgregado");
        div.innerHTML = div.dir;
        // Creamos el elemento <table>
        var tabla   = document.createElement("table");
        // Agregamos clases el elemento <table>
        tabla.className = "hoverable striped";
        // Creamos el elemento <thead>
        var tblHead = document.createElement("thead");
        // Creamos el elemento <tbody>
        var tblBody = document.createElement("tbody");

        // Creamos un array con las columnas de nuestra tabla
        var thArray = ['Cantidad', 'Servicio', /*'Descripción',*/ 'Fecha/hora', 'Precio', 'Subtotal']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                /*
                 if(j == 2){
                 var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                 celda.appendChild(textoCelda);
                 hilera.appendChild(celda);
                 }
                 */
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

    }
    function buscarCargoadmisionArticulo(idordencompradetalle){

        //Obtenemos el valor del selector de lugarinventario
        var busquedaAdmisionArticulo = $("input#busquedaAdmisionArticulo").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoadmisionarticulo_by = $("select#cargoadmisionarticulo_by").val();
        //Validamos el campo cargoadmisionarticulo_by, simplemente miramos que no esté vacío
        if (cargoadmisionarticulo_by == "") {
            if ($('span#cargoadmisionarticulo_by_error').hasClass('hidden')){
                $('span#cargoadmisionarticulo_by_error').removeClass('hidden');
                $("span#cargoadmisionarticulo_by_error").show();
                $("span#cargoadmisionarticulo_by").focus();
            }
            return false;
        }else{
            $("span#cargoadmisionarticulo_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoadmisionarticulo_by=' + cargoadmisionarticulo_by + '&busquedaAdmisionArticulo=' + busquedaAdmisionArticulo ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                ordencompradetalleArray = []
                var ordencompradetalleEntity = data.ordencompradetalleArray;
                $.each( ordencompradetalleEntity, function( key, value ) {
                    ordencompradetalleArray.push({
                        "idordencompradetalle" : value.idordencompradetalle,
                        "idlugarinventario" : value.idlugarinventario,
                        "cargoadmision_tipo" : value.cargoadmision_tipo,
                        "cargoadmision_fecha" : value.cargoadmision_fecha,
                        "caducidad" : value.ordencompradetalle_caducidad,
                        "existencia" : value.existencia,
                        "articulo" : value.articulo,
                        "descripcion" : value.descripcion,
                        "precio" : value.precio,
                        "salida" : value.salida
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarAdmisionArticulo(ordencompradetalleArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoadmision
                $.each(ordencompradetalleArray, function(keys, values){

                    // Mantenemos el foco en el artículo que se esta agregando
                    if(idordencompradetalle == values.idordencompradetalle){
                        if ($('#fieldsetCargoadmisionArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoadmisionArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cargoadmision_cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoadmision_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoadmision
                        var div = document.getElementById("fieldsetCargoadmisionArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoadmisionTipo')){
                            var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                            divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoadmisionFecha')){
                            var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                            divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                        }
                        // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                        var form = document.getElementById('CargoadmisionForm');

                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionTipo = document.createElement('div');
                        divinputCargoadmisionTipo.className = "input-field";
                        divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                        var inputCargoadmisionTipo = document.createElement('input');
                        inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                        divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionFecha = document.createElement('div');
                        divinputCargoadmisionFecha.className = "input-field";
                        divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                        var inputCargoadmisionFecha = document.createElement('input');
                        inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                        divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    }

                    // Si dan clic a una entidad de la colección
                    $("#entidadArticulo-"+values.idordencompradetalle).click(function(){
                        if ($('#fieldsetCargoadmisionArticulo').hasClass('hiddendiv')){
                            $('#fieldsetCargoadmisionArticulo').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        var br5   = document.createElement("br");
                        var br6   = document.createElement("br");
                        // Creamos el input de cantidad de tipo select
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var select = document.createElement('select');
                        select.style.display = "inline";
                        select.style.width = "auto";
                        select.style.height = "auto";
                        select.setAttribute ( 'id', 'cargoadmision_cantidad' );
                        // agregamos los valores <option> a seleccionar
                        for($i=1; $i<=values.existencia; $i++){
                            var selectOption = new Option($i,$i);
                            select.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputCantidad.appendChild(select);

                        // Creamos el input de cantidad de tipo select
                        var divinputDestino = document.createElement('div');
                        divinputDestino.className = "input-field";
                        divinputDestino.setAttribute ( 'id', 'divinputDestino' );
                        var selectDestino = document.createElement('select');
                        selectDestino.style.display = "inline";
                        selectDestino.style.width = "auto";
                        selectDestino.style.height = "auto";
                        selectDestino.setAttribute ( 'id', 'cargoadmision_destino' );
                        var destinosArray = ["SERVICIO", "ENFERMERIA", "QUIROFANO", "CUNERO", "PSICOPROFILACTICO", "CONSULTORIO"];
                        // agregamos los valores <option> a seleccionar
                        for($i=0; $i<=destinosArray.length; $i++){
                            var selectOption = new Option(destinosArray[$i],destinosArray[$i]);
                            selectDestino.appendChild(selectOption);
                        }
                        // agregamos las options en nuestro select
                        divinputDestino.appendChild(selectDestino);

                        // Creamos la entidad textual lista para agregar al cargoadmision
                        var div = document.getElementById("fieldsetCargoadmisionArticuloEntity");
                        div.innerHTML = div.dir;
                        var textoArticulo = document.createTextNode("Artículo: "+values.articulo);
                        var textoDescripcion = document.createTextNode("Descrpción: "+values.descripcion);
                        var textoCaducidad = document.createTextNode("Caducidad: "+values.caducidad);
                        var textoDisponibleEn = document.createTextNode("Disponible en: "+values.salida);
                        var textoDestino = document.createTextNode("Destino: ");
                        var textoExistencia = document.createTextNode("Existencias: "+values.existencia);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoArticulo);
                        div.appendChild(br);
                        div.appendChild(textoDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoCaducidad);
                        div.appendChild(br3);
                        div.appendChild(textoDisponibleEn);
                        div.appendChild(br4);
                        div.appendChild(textoDestino);
                        div.appendChild(selectDestino);
                        div.appendChild(br5);
                        div.appendChild(textoExistencia);
                        div.appendChild(br6);
                        div.appendChild(textoCantidad);
                        div.appendChild(select);

                        // Actializar existencias

                        // El input ordencompradetalle solamente lo necesitamos para actualizar nuestra entidad artículo antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idordencompradetalle lo eliminamos
                        if(document.getElementById('divinputIdordencompradetalle')){
                            var divinputIdordencompradetalleDelete = document.getElementById("divinputIdordencompradetalle");
                            divinputIdordencompradetalleDelete.parentNode.removeChild(divinputIdordencompradetalleDelete);
                        }
                        // Actializar existencias

                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputIdlugarinventario')){
                            var divinputIdlugarinventarioDelete = document.getElementById("divinputIdlugarinventario");
                            divinputIdlugarinventarioDelete.parentNode.removeChild(divinputIdlugarinventarioDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoadmisionTipo')){
                            var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                            divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                        }
                        // Si el formulario ya tiene el input de idlugarinventario lo eliminamos
                        if(document.getElementById('divinputCargoadmisionFecha')){
                            var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                            divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                        }
                        // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                        var form = document.getElementById('CargoadmisionForm');

                        // Actializar existencias
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdordencompradetalle = document.createElement('div');
                        divinputIdordencompradetalle.className = "input-field";
                        divinputIdordencompradetalle.setAttribute ( 'id', 'divinputIdordencompradetalle' );
                        var inputIdordencompradetalle = document.createElement('input');
                        inputIdordencompradetalle.setAttribute ( 'id', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'type', 'hidden' );
                        inputIdordencompradetalle.setAttribute ( 'name', 'idordencompradetalle' );
                        inputIdordencompradetalle.setAttribute ( 'value', values.idordencompradetalle );
                        divinputIdordencompradetalle.appendChild(inputIdordencompradetalle)
                        // Actializar existencias

                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdlugarinventario = document.createElement('div');
                        divinputIdlugarinventario.className = "input-field";
                        divinputIdlugarinventario.setAttribute ( 'id', 'divinputIdlugarinventario' );
                        var inputIdlugarinventario = document.createElement('input');
                        inputIdlugarinventario.setAttribute ( 'id', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'type', 'hidden' );
                        inputIdlugarinventario.setAttribute ( 'name', 'idlugarinventario' );
                        inputIdlugarinventario.setAttribute ( 'value', values.idlugarinventario );
                        divinputIdlugarinventario.appendChild(inputIdlugarinventario)
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionTipo = document.createElement('div');
                        divinputCargoadmisionTipo.className = "input-field";
                        divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                        var inputCargoadmisionTipo = document.createElement('input');
                        inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                        divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionFecha = document.createElement('div');
                        divinputCargoadmisionFecha.className = "input-field";
                        divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                        var inputCargoadmisionFecha = document.createElement('input');
                        inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                        divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionTipo);
                        form.appendChild(divinputIdlugarinventario);
                        form.appendChild(divinputIdordencompradetalle);
                    });
                });
            },
            error: function(){
                $('#modalCargoadmisionArticulo').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    };

    function buscarCargoadmisionServicio(idservicio){

        //Obtenemos el valor del selector de lugarinventario
        var busquedaAdmisionServicio = $("input#busquedaAdmisionServicio").val();

        //Obtenemos el valor del selector de lugarinventario
        var cargoadmisionservicio_by = $("select#cargoadmisionservicio_by").val();
        //Validamos el campo idlugarinventario, simplemente miramos que no esté vacío
        if (cargoadmisionservicio_by == "") {
            if ($('span#cargoadmisionservicio_by_error').hasClass('hidden')){
                $('span#cargoadmisionservicio_by_error').removeClass('hidden');
                $("span#cargoadmisionservicio_by_error").show();
                $("span#cargoadmisionservicio_by").focus();
            }
            return false;
        }else{
            $("span#cargoadmisionservicio_by_error").hide();
        }

        //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
        var dataString = 'cargoadmisionservicio_by=' + cargoadmisionservicio_by + '&busquedaAdmisionServicio=' + busquedaAdmisionServicio ;

        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataString,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                servicioArray = []
                var servicioEntity = data.servicioArray
                $.each( servicioEntity, function( key, value ) {
                    servicioArray.push({
                        "idservicio" : value.idservicio,
                        "cargoadmision_tipo" : value.cargoadmision_tipo,
                        "cargoadmision_fecha" : value.cargoadmision_fecha,
                        "servicio_nombre" : value.servicio_nombre,
                        "servicio_descripcion" : value.servicio_descripcion,
                        "servicio_precio" : value.servicio_precio
                    });
                });

                // Creamos nuestra tabla de colecciones
                generaTablaBuscarAdmisionServicio(servicioArray);

                // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoadmision
                $.each(servicioArray, function(keys, values){
                    // Mantenemos el foco en el servicio que se esta agregando
                    if(idservicio == values.idservicio){
                        if ($('#fieldsetCargoadmisionServicio').hasClass('hiddendiv')){
                            $('#fieldsetCargoadmisionServicio').removeClass('hiddendiv')
                        }
                        var br   = document.createElement("br");
                        var br2   = document.createElement("br");
                        var br3   = document.createElement("br");
                        var br4   = document.createElement("br");
                        // Creamos el input de cantidad de tipo input
                        var divinputCantidad = document.createElement('div');
                        divinputCantidad.className = "input-field";
                        divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                        var inputCantidad = document.createElement('input');
                        inputCantidad.setAttribute ( 'id', 'cargoadmision_cantidad' );
                        inputCantidad.style.width = "20%";
                        inputCantidad.type = "number";
                        inputCantidad.min ="1";
                        inputCantidad.max = "999999999";
                        divinputCantidad.appendChild(inputCantidad);

                        // Creamos la entidad textual lista para agregar al cargoadmision
                        var div = document.getElementById("fieldsetCargoadmisionServicioEntity");
                        div.innerHTML = div.dir;
                        var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                        var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                        var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                        var textoCargoadmisionFecha = document.createTextNode("Fecha: "+values.cargoadmision_fecha);
                        var textoCantidad = document.createTextNode("Cantidad: ");
                        div.appendChild(textoServicioNombre);
                        div.appendChild(br);
                        div.appendChild(textoServicioDescripcion);
                        div.appendChild(br2);
                        div.appendChild(textoServicioPrecio);
                        div.appendChild(br3);
                        div.appendChild(textoCargoadmisionFecha);
                        div.appendChild(br4);
                        div.appendChild(textoCantidad);
                        div.appendChild(inputCantidad);

                        // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                        // Si el formulario ya tiene el input de idservicio lo eliminamos
                        if(document.getElementById('divinputIdservicio')){
                            var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                            divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                        }

                        // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                        if(document.getElementById('divinputCargoadmisionTipo')){
                            var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                            divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                        }
                        // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                        if(document.getElementById('divinputCargoadmisionFecha')){
                            var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                            divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                        }

                        // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                        var form = document.getElementById('CargoadmisionForm');
                        // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                        var divinputIdservicio = document.createElement('div');
                        divinputIdservicio.className = "input-field";
                        divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                        var inputIdservicio = document.createElement('input');
                        inputIdservicio.setAttribute ( 'id', 'idservicio' );
                        inputIdservicio.setAttribute ( 'type', 'hidden' );
                        inputIdservicio.setAttribute ( 'name', 'idservicio' );
                        inputIdservicio.setAttribute ( 'value', values.idservicio );
                        divinputIdservicio.appendChild(inputIdservicio)
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionTipo = document.createElement('div');
                        divinputCargoadmisionTipo.className = "input-field";
                        divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                        var inputCargoadmisionTipo = document.createElement('input');
                        inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                        inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                        divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                        // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                        var divinputCargoadmisionFecha = document.createElement('div');
                        divinputCargoadmisionFecha.className = "input-field";
                        divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                        var inputCargoadmisionFecha = document.createElement('input');
                        inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                        inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                        inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                        divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionFecha);
                        form.appendChild(divinputCargoadmisionTipo);
                        form.appendChild(divinputIdservicio);
                    }

                    // Si dan clic a una entidad de la colección

                    // Seleccionamos un item de nuestra tabla de colecciones y construimos la entidad para agregarla como cargoconsulta
                    $.each(servicioArray, function(keys, values){
                        // Si dan clic a una entidad de la colección
                        $("#entidadServicio-"+values.idservicio).click(function(){
                            if ($('#fieldsetCargoadmisionServicio').hasClass('hiddendiv')){
                                $('#fieldsetCargoadmisionServicio').removeClass('hiddendiv')
                            }
                            var br   = document.createElement("br");
                            var br2   = document.createElement("br");
                            var br3   = document.createElement("br");
                            var br4   = document.createElement("br");
                            // Creamos el input de cantidad de tipo input
                            var divinputCantidad = document.createElement('div');
                            divinputCantidad.className = "input-field";
                            divinputCantidad.setAttribute ( 'id', 'divinputCantidad' );
                            var inputCantidad = document.createElement('input');
                            inputCantidad.setAttribute ( 'id', 'cargoadmision_cantidad' );
                            inputCantidad.style.width = "20%";
                            inputCantidad.type = "number";
                            inputCantidad.min ="1";
                            inputCantidad.max = "999999999";
                            divinputCantidad.appendChild(inputCantidad);

                            // Creamos la entidad textual lista para agregar al cargoadmision
                            var div = document.getElementById("fieldsetCargoadmisionServicioEntity");
                            div.innerHTML = div.dir;
                            var textoServicioNombre = document.createTextNode("Servicio: "+values.servicio_nombre);
                            var textoServicioDescripcion = document.createTextNode("Descrpción: "+values.servicio_descripcion);
                            var textoServicioPrecio = document.createTextNode("Precio: "+values.servicio_precio);
                            var textoCargoadmisionFecha = document.createTextNode("Fecha: "+values.cargoadmision_fecha);
                            var textoCantidad = document.createTextNode("Cantidad: ");
                            div.appendChild(textoServicioNombre);
                            div.appendChild(br);
                            div.appendChild(textoServicioDescripcion);
                            div.appendChild(br2);
                            div.appendChild(textoServicioPrecio);
                            div.appendChild(br3);
                            div.appendChild(textoCargoadmisionFecha);
                            div.appendChild(br4);
                            div.appendChild(textoCantidad);
                            div.appendChild(inputCantidad);

                            // El input idservicio solamente lo necesitamos para actualizar nuestra entidad servicio antes de agregar el cargo.
                            // Si el formulario ya tiene el input de idservicio lo eliminamos
                            if(document.getElementById('divinputIdservicio')){
                                var divinputIdservicioDelete = document.getElementById("divinputIdservicio");
                                divinputIdservicioDelete.parentNode.removeChild(divinputIdservicioDelete);
                            }

                            // Si el formulario ya tiene el input de servicio_nombre lo eliminamos
                            if(document.getElementById('divinputCargoadmisionTipo')){
                                var divinputCargoadmisionTipoDelete = document.getElementById("divinputCargoadmisionTipo");
                                divinputCargoadmisionTipoDelete.parentNode.removeChild(divinputCargoadmisionTipoDelete);
                            }
                            // Si el formulario ya tiene el input de servicio_descripcion lo eliminamos
                            if(document.getElementById('divinputCargoadmisionFecha')){
                                var divinputCargoadmisionFechaDelete = document.getElementById("divinputCargoadmisionFecha");
                                divinputCargoadmisionFechaDelete.parentNode.removeChild(divinputCargoadmisionFechaDelete);
                            }

                            // Creamos nuestro Formulario con los datos a insertar en Cargoadmision
                            var form = document.getElementById('CargoadmisionForm');
                            // Creamos el input de idlugarinventario y le seteamos el valor que le corresponde
                            var divinputIdservicio = document.createElement('div');
                            divinputIdservicio.className = "input-field";
                            divinputIdservicio.setAttribute ( 'id', 'divinputIdservicio' );
                            var inputIdservicio = document.createElement('input');
                            inputIdservicio.setAttribute ( 'id', 'idservicio' );
                            inputIdservicio.setAttribute ( 'type', 'hidden' );
                            inputIdservicio.setAttribute ( 'name', 'idservicio' );
                            inputIdservicio.setAttribute ( 'value', values.idservicio );
                            divinputIdservicio.appendChild(inputIdservicio)
                            // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                            var divinputCargoadmisionTipo = document.createElement('div');
                            divinputCargoadmisionTipo.className = "input-field";
                            divinputCargoadmisionTipo.setAttribute ( 'id', 'divinputCargoadmisionTipo' );
                            var inputCargoadmisionTipo = document.createElement('input');
                            inputCargoadmisionTipo.setAttribute ( 'id', 'cargoadmision_tipo' );
                            inputCargoadmisionTipo.setAttribute ( 'type', 'hidden' );
                            inputCargoadmisionTipo.setAttribute ( 'name', 'cargoadmision_tipo' );
                            inputCargoadmisionTipo.setAttribute ( 'value', values.cargoadmision_tipo );
                            divinputCargoadmisionTipo.appendChild(inputCargoadmisionTipo);
                            // Creamos el input de cargoadmision_tipo y le seteamos el valor que le corresponde
                            var divinputCargoadmisionFecha = document.createElement('div');
                            divinputCargoadmisionFecha.className = "input-field";
                            divinputCargoadmisionFecha.setAttribute ( 'id', 'divinputCargoadmisionFecha' );
                            var inputCargoadmisionFecha = document.createElement('input');
                            inputCargoadmisionFecha.setAttribute ( 'id', 'cargoadmision_fecha' );
                            inputCargoadmisionFecha.setAttribute ( 'type', 'hidden' );
                            inputCargoadmisionFecha.setAttribute ( 'name', 'cargoadmision_fecha' );
                            inputCargoadmisionFecha.setAttribute ( 'value', values.cargoadmision_fecha );
                            divinputCargoadmisionFecha.appendChild(inputCargoadmisionFecha);
                            form.appendChild(divinputCargoadmisionFecha);
                            form.appendChild(divinputCargoadmisionTipo);
                            form.appendChild(divinputIdservicio);
                        });
                    });
                });
            },
            error: function(){
                $('#modalCargoadmisionServicio').prepend('<div class="card-panel #00086E-text red accent-2 guardado-ajax">Error al intentar buscar</div>')
            }
        });

        return false;
    };
    function tablaCargoadmisionArticuloAgregadoInicial(cargoadmisionArray) {

        var totalArticulo = 0;
        var iva = 0;

        // Obtener la referencia del elemento div con id = cargoadmisionArticuloResult
        var div = document.getElementById("cargoadmisionArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Articulo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            totalArticulo += parseFloat(cargoadmisionArray[i]["total"]);
            iva += parseFloat(cargoadmisionArray[i]["iva"]);
            var status = cargoadmisionArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-admisión");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol8.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p7.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p8);
                    divCol8.appendChild(divLabelContainer8);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    /*
                     var inputHiddenIdcargoadmision = document.createElement('input')
                     inputHiddenIdcargoadmision.style.width = "auto";
                     inputHiddenIdcargoadmision.setAttribute ( 'id', 'input_idcargoadmision'+cargoadmisionArray[i]["idcargoadmision"] );
                     inputHiddenIdcargoadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdcargoadmision.setAttribute ( 'name', 'idcargodmision' );
                     inputHiddenIdcargoadmision.setAttribute ( 'value', cargoadmisionArray[i]["idcargoadmision"] );

                     var inputHiddenIdadmision = document.createElement('input')
                     inputHiddenIdadmision.style.width = "auto";
                     inputHiddenIdadmision.setAttribute ( 'id', 'input_idadmision'+cargoadmisionArray[i]["idadmision"] );
                     inputHiddenIdadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdadmision.setAttribute ( 'name', 'idadmision' );
                     inputHiddenIdadmision.setAttribute ( 'value', cargoadmisionArray[i]["idadmision"] );

                     divcargosAdmisionDelete.appendChild(inputHiddenIdadmision);
                     divcargosAdmisionDelete.appendChild(inputHiddenIdcargoadmision);
                     */

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                }
            }
            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoadmision = cargoadmisionArray[i]["idcargoadmision"]
            var idadmision = cargoadmisionArray[i]["idadmision"]
            var cantidad = cargoadmisionArray[i]["cargoadmision_cantidad"]

            // Si dan clic en eliminarCargoadmision-id
            $("#eliminarCargoadmision-"+idcargoadmision).click({idcargoadmision:idcargoadmision, idadmision:idadmision, cantidad:cantidad},function() {

                var split = $(this).attr('id').split('-')
                idcargoadmision = split[1]

                /*
                 //Obtenemos el valor del input de divInputAnticipo
                 var idcargoadmision = $("input#input_idcargoadmision").val();
                 var idadmision = $("input#input_idadmision").val();
                 */
                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoadmision_tipo=articulo' + '&idcargoadmision=' + idcargoadmision + '&idadmision=' + idadmision + '&cantidad=' + cantidad;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un articulo")
                        $('#delete-modal-cargoadmision-'+idcargoadmision).closeModal();
                        cargoadmisionArray = []
                        var cargoadmisionEntity = data.cargoadmisionArray
                        if(cargoadmisionEntity){
                            $.each( cargoadmisionEntity, function( key, value ) {
                                cargoadmisionArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }

                        tablaCargoadmisionArticuloEliminado(cargoadmisionArray)
                        tablaCargoadmisionArticuloAgregadoModal(cargoadmisionArray)
                        cargoadmisionEliminadoArray = []
                        var cargoadmisionEliminado = data.cargoadmisionEliminadoArray
                        if(cargoadmisionEliminado){
                            $.each( cargoadmisionEliminado, function( key, value ) {
                                cargoadmisionEliminadoArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }
                        totalResponse('eliminar', -(cargoadmisionEliminadoArray[0]['iva']), status, -(cargoadmisionEliminadoArray[0]['total']), null, 'admision')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoadmision")
                    }
                });
                return false;

            });

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, totalArticulo, null, 'admision')

        var dataStringVerAdmisionanticipo = "ver_admisionanticipo=true" + "&idadmision=" + idadmision;
        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringVerAdmisionanticipo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                admisionanticipoArray = []
                var admisionanticipoEntity = data.admisionanticipoArray
                if(admisionanticipoEntity){
                    $.each( admisionanticipoEntity, function( key, value ) {
                        admisionanticipoArray.push({
                            "idadmisionanticipo" : value.idadmisionanticipo,
                            "idadmision" : value.idadmision,
                            "admisionanticipo_fecha" : value.admisionanticipo_fecha,
                            "admisionanticipo_cantidad" : value.admisionanticipo_cantidad,
                            "admisionanticipo_nota" : value.admisionanticipo_nota,
                            "admisionanticipo_tipo" : value.admisionanticipo_tipo
                        });
                    });
                }

                // Si no existe un cargo de servicio, construimos Anticipo: $$$ MXN, de lo contrario. lo constriye tablaCargoadmisionServicioAgregadoInicial
                if(data.existeServicio == false){
                    var AnticipoCantidad = 0;
                    for(count=0; count<=admisionanticipoArray.length; count++){
                        AnticipoCantidad = Number(admisionanticipoArray[count]["admisionanticipo_cantidad"]);
                        totalResponse('resta', null, status, -AnticipoCantidad, null, 'admision', AnticipoCantidad)
                    }
                }
            },
            error: function(){
                //alert("Error al intentar actualizar Anticipos")
            }
        });

    }

    function tablaCargoadmisionArticuloAgregado(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = cargoadmisionArticuloResult
        var div = document.getElementById("cargoadmisionArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Articulo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            var totalArticulo = parseFloat(cargoadmisionArray[i]["total"]);
            var iva = parseFloat(cargoadmisionArray[i]["iva"]);
            var status = cargoadmisionArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-admisión");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol8.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p8.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p8);
                    divCol8.appendChild(divLabelContainer8);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    /*
                     var inputHiddenIdcargoadmision = document.createElement('input')
                     inputHiddenIdcargoadmision.style.width = "auto";
                     inputHiddenIdcargoadmision.setAttribute ( 'id', 'input_idcargoadmision'+cargoadmisionArray[i]["idcargoadmision"] );
                     inputHiddenIdcargoadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdcargoadmision.setAttribute ( 'name', 'idcargodmision' );
                     inputHiddenIdcargoadmision.setAttribute ( 'value', cargoadmisionArray[i]["idcargoadmision"] );

                     var inputHiddenIdadmision = document.createElement('input')
                     inputHiddenIdadmision.style.width = "auto";
                     inputHiddenIdadmision.setAttribute ( 'id', 'input_idadmision'+cargoadmisionArray[i]["idadmision"] );
                     inputHiddenIdadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdadmision.setAttribute ( 'name', 'idadmision' );
                     inputHiddenIdadmision.setAttribute ( 'value', cargoadmisionArray[i]["idadmision"] );

                     divcargosAdmisionDelete.appendChild(inputHiddenIdadmision);
                     divcargosAdmisionDelete.appendChild(inputHiddenIdcargoadmision);
                     */

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                }
            }
            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoadmision = cargoadmisionArray[i]["idcargoadmision"]
            var idadmision = cargoadmisionArray[i]["idadmision"]
            var cantidad = cargoadmisionArray[i]["cargoadmision_cantidad"]

            // Si dan clic en eliminarCargoadmision-id
            $("#eliminarCargoadmision-"+idcargoadmision).click({idcargoadmision:idcargoadmision, idadmision:idadmision, cantidad:cantidad},function() {

                var split = $(this).attr('id').split('-')
                idcargoadmision = split[1]

                /*
                 //Obtenemos el valor del input de divInputAnticipo
                 var idcargoadmision = $("input#input_idcargoadmision").val();
                 var idadmision = $("input#input_idadmision").val();
                 */
                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoadmision_tipo=articulo' + '&idcargoadmision=' + idcargoadmision + '&idadmision=' + idadmision + '&cantidad=' + cantidad;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'asignar', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un articulo")
                        $('#delete-modal-cargoadmision-'+idcargoadmision).closeModal();
                        cargoadmisionArray = []
                        var cargoadmisionEntity = data.cargoadmisionArray
                        if(cargoadmisionEntity){
                            $.each( cargoadmisionEntity, function( key, value ) {
                                cargoadmisionArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }

                        tablaCargoadmisionArticuloEliminado(cargoadmisionArray)
                        tablaCargoadmisionArticuloAgregadoModal(cargoadmisionArray)
                        cargoadmisionEliminadoArray = []
                        var cargoadmisionEliminado = data.cargoadmisionEliminadoArray
                        if(cargoadmisionEliminado){
                            $.each( cargoadmisionEliminado, function( key, value ) {
                                cargoadmisionEliminadoArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "articulo" : value.articulo,
                                    "descripcion" : value.descripcion,
                                    "salida" : value.salida,
                                    "destino" : value.destino,
                                    "fechahora" : value.fechahora,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total
                                });
                            });
                        }
                        totalResponse('eliminar', -(cargoadmisionEliminadoArray[0]['iva']), status, -(cargoadmisionEliminadoArray[0]['total']), null, 'admision')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoadmision")
                    }
                });
                return false;

            });

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, totalArticulo, null, 'admision')

    }

    function tablaCargoadmisionArticuloEliminado(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = cargoadmisionArticuloResult
        var div = document.getElementById("cargoadmisionArticuloResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Articulo', 'Descripción', 'Salida', 'Destino', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 9){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 10){

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-admisión");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Artículo:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Salida:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Destino:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Fecha/Hora:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    var divCol7 = document.createElement('div')
                    divCol7.className = "col s4";
                    var divLabelContainer7 = document.createElement('div')
                    divLabelContainer7.className = "label-container";
                    var label7 = document.createElement('label')
                    var textlabel7 = document.createTextNode("Precio:");
                    label7.appendChild(textlabel7);
                    var p7 = document.createElement('p')
                    var textp7 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7.appendChild(textp7);
                    divLabelContainer7.appendChild(label7);
                    divLabelContainer7.appendChild(p7);
                    divCol7.appendChild(divLabelContainer7);
                    var divCol8 = document.createElement('div')
                    divCol8.className = "col s12";
                    var divLabelContainer8 = document.createElement('div')
                    divLabelContainer8.className = "label-container";
                    var label8 = document.createElement('label')
                    var textlabel8 = document.createTextNode("Subtotal:");
                    label8.appendChild(textlabel8);
                    var p8 = document.createElement('p')
                    var textp8 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p8.appendChild(textp8);
                    divLabelContainer8.appendChild(label8);
                    divLabelContainer8.appendChild(p8);
                    divCol8.appendChild(divLabelContainer8);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(divCol7);
                    fieldset.appendChild(divCol8);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmision');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Artículo:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["articulo"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Salida:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["salida"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Destino:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["destino"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Fecha/Hora:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer5Delete);
                    var divCol7Delete = document.createElement('div')
                    divCol7Delete.className = "col s4";
                    var divLabelContainer7Delete = document.createElement('div')
                    divLabelContainer7Delete.className = "label-container";
                    var label7Delete = document.createElement('label')
                    var textlabel7Delete = document.createTextNode("Precio:");
                    label7Delete.appendChild(textlabel7Delete);
                    var p7Delete = document.createElement('p')
                    var textp7Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p7Delete.appendChild(textp7Delete);
                    divLabelContainer7Delete.appendChild(label7Delete);
                    divLabelContainer7Delete.appendChild(p7Delete);
                    divCol7Delete.appendChild(divLabelContainer7Delete);
                    var divCol8Delete = document.createElement('div')
                    divCol8Delete.className = "col s12";
                    var divLabelContainer8Delete = document.createElement('div')
                    divLabelContainer8Delete.className = "label-container";
                    var label8Delete = document.createElement('label')
                    var textlabel8Delete = document.createTextNode("Subtotal:");
                    label8Delete.appendChild(textlabel8Delete);
                    var p8Delete = document.createElement('p')
                    var textp8Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p8Delete.appendChild(textp8Delete);
                    divLabelContainer8Delete.appendChild(label8Delete);
                    divLabelContainer8Delete.appendChild(p8Delete);
                    divCol8Delete.appendChild(divLabelContainer8Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(divCol7Delete);
                    fieldsetDelete.appendChild(divCol8Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmision-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    /*
                     var inputHiddenIdcargoadmision = document.createElement('input')
                     inputHiddenIdcargoadmision.style.width = "auto";
                     inputHiddenIdcargoadmision.setAttribute ( 'id', 'input_idcargoadmision'+cargoadmisionArray[i]["idcargoadmision"] );
                     inputHiddenIdcargoadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdcargoadmision.setAttribute ( 'name', 'idcargodmision' );
                     inputHiddenIdcargoadmision.setAttribute ( 'value', cargoadmisionArray[i]["idcargoadmision"] );

                     var inputHiddenIdadmision = document.createElement('input')
                     inputHiddenIdadmision.style.width = "auto";
                     inputHiddenIdadmision.setAttribute ( 'id', 'input_idadmision'+cargoadmisionArray[i]["idadmision"] );
                     inputHiddenIdadmision.setAttribute ( 'type', 'hidden' );
                     inputHiddenIdadmision.setAttribute ( 'name', 'idadmision' );
                     inputHiddenIdadmision.setAttribute ( 'value', cargoadmisionArray[i]["idadmision"] );

                     divcargosAdmisionDelete.appendChild(inputHiddenIdadmision);
                     divcargosAdmisionDelete.appendChild(inputHiddenIdcargoadmision);
                     */

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmision-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);
                }
            }
            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);
    }

    function tablaCargoadmisionServicioAgregadoInicial(cargoadmisionArray) {

        var totalServicio = 0;
        var iva = 0;

        // Obtener la referencia del elemento div con id = cargoadmisionServicioResult
        var div = document.getElementById("cargoadmisionServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            totalServicio += parseFloat(cargoadmisionArray[i]["total"]);
            iva += parseFloat(cargoadmisionArray[i]["iva"]);
            var status = cargoadmisionArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoadmision = cargoadmisionArray[i]["idcargoadmision"]
            var idadmision = cargoadmisionArray[i]["idadmision"]

            // Si dan clic en eliminarCargoadmisionServicio--id
            $("#eliminarCargoadmisionServicio-"+idcargoadmision).click({idcargoadmision:idcargoadmision, idadmision:idadmision},function() {

                var split = $(this).attr('id').split('-');
                idcargoadmision = split[1];

                /*
                 //Obtenemos el valor del input de divInputAnticipo
                 var idcargoadmision = $("input#input_idcargoadmision").val();
                 var idadmision = $("input#input_idadmision").val();
                 */
                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoadmision_tipo=servicio' + '&idcargoadmision=' + idcargoadmision + '&idadmision=' + idadmision;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un servicio")
                        $('#delete-modal-cargoadmisionServicio-'+idcargoadmision).closeModal();
                        cargoadmisionArray = []
                        var cargoadmisionEntity = data.cargoadmisionArray
                        if(cargoadmisionEntity){
                            $.each( cargoadmisionEntity, function( key, value ) {
                                cargoadmisionArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        tablaCargoadmisionServicioEliminado(cargoadmisionArray)
                        tablaCargoadmisionServicioAgregadoModal(cargoadmisionArray)
                        cargoadmisionEliminadoArray = []
                        var cargoadmisionEliminado = data.cargoadmisionEliminadoArray
                        if(cargoadmisionEliminado){
                            $.each( cargoadmisionEliminado, function( key, value ) {
                                cargoadmisionEliminadoArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        totalResponse('eliminar', -(cargoadmisionEliminadoArray[0]['iva']), status, null, -(cargoadmisionEliminadoArray[0]['total']), 'admision')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoadmision")
                    }
                });
                return false;

            });
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        if (typeof(status) === "undefined") {

        }else{
            totalResponse('igual', iva, status, null, totalServicio, 'admision')
        }

        var dataStringVerAdmisionanticipo = "ver_admisionanticipo=true" + "&idadmision=" + idadmision;
        $.ajax({
            type: "POST",
            url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
            dataType : 'json',
            data: dataStringVerAdmisionanticipo,
            async: false,
            jsonpCallback: 'callback',
            success: function(data) {
                admisionanticipoArray = []
                var admisionanticipoEntity = data.admisionanticipoArray
                if(admisionanticipoEntity){
                    $.each( admisionanticipoEntity, function( key, value ) {
                        admisionanticipoArray.push({
                            "idadmisionanticipo" : value.idadmisionanticipo,
                            "idadmision" : value.idadmision,
                            "admisionanticipo_fecha" : value.admisionanticipo_fecha,
                            "admisionanticipo_cantidad" : value.admisionanticipo_cantidad,
                            "admisionanticipo_nota" : value.admisionanticipo_nota,
                            "admisionanticipo_tipo" : value.admisionanticipo_tipo
                        });
                    });
                }

                var AnticipoCantidad = 0;
                for(count=0; count<=admisionanticipoArray.length; count++){
                    AnticipoCantidad = Number(admisionanticipoArray[count]["admisionanticipo_cantidad"]);
                    totalResponse('resta', null, status, -AnticipoCantidad, null, 'admision', AnticipoCantidad)
                }

            },
            error: function(){
                //alert("Error al intentar actualizar Anticipos")
            }
        });
    }

    function tablaCargoadmisionServicioAgregado(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = cargoadmisionServicioResult
        var div = document.getElementById("cargoadmisionServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            var totalServicio = parseFloat(cargoadmisionArray[i]["total"]);
            var iva = parseFloat(cargoadmisionArray[i]["iva"]);
            var status = cargoadmisionArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idcargoadmision = cargoadmisionArray[i]["idcargoadmision"]
            var idadmision = cargoadmisionArray[i]["idadmision"]

            // Si dan clic en eliminarCargoadmisionServicio--id
            $("#eliminarCargoadmisionServicio-"+idcargoadmision).click({idcargoadmision:idcargoadmision, idadmision:idadmision},function() {

                var split = $(this).attr('id').split('-');
                idcargoadmision = split[1]

                /*
                 //Obtenemos el valor del input de divInputAnticipo
                 var idcargoadmision = $("input#input_idcargoadmision").val();
                 var idadmision = $("input#input_idadmision").val();
                 */
                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'eliminar_cargoadmision_tipo=servicio' + '&idcargoadmision=' + idcargoadmision + '&idadmision=' + idadmision;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'asignar', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {
                        //alert("Se eliminó exitosamente el cargo de un servicio")
                        $('#delete-modal-cargoadmisionServicio-'+idcargoadmision).closeModal();
                        cargoadmisionArray = []
                        var cargoadmisionEntity = data.cargoadmisionArray
                        if(cargoadmisionEntity){
                            $.each( cargoadmisionEntity, function( key, value ) {
                                cargoadmisionArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        tablaCargoadmisionServicioEliminado(cargoadmisionArray)
                        tablaCargoadmisionServicioAgregadoModal(cargoadmisionArray)
                        cargoadmisionEliminadoArray = []
                        var cargoadmisionEliminado = data.cargoadmisionEliminadoArray
                        if(cargoadmisionEliminado){
                            $.each( cargoadmisionEliminado, function( key, value ) {
                                cargoadmisionEliminadoArray.push({
                                    "idcargoadmision" : value.idcargoadmision,
                                    "idadmision" : value.idadmision,
                                    "status" : value.status,
                                    "cargoadmision_cantidad" : value.cargoadmision_cantidad,
                                    "servicio" : value.servicio,
                                    "descripcion" : value.descripcion,
                                    "precio" : value.precio,
                                    "subtotal" : value.subtotal,
                                    "iva" : value.iva,
                                    "total" : value.total,
                                    "fechahora" : value.fechahora
                                });
                            });
                        }

                        totalResponse('eliminar', -(cargoadmisionEliminadoArray[0]['iva']), status, null, -(cargoadmisionEliminadoArray[0]['total']), 'admision')
                    },
                    error: function(){
                        alert("Error al intentar eliminar idcargoadmision")
                    }
                });
                return false;

            });
        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);

        totalResponse('igual', iva, status, null, totalServicio, 'admision')
    }


    function tablaCargoadmisionServicioEliminado(cargoadmisionArray) {

        // Obtener la referencia del elemento div con id = cargoadmisionServicioResult
        var div = document.getElementById("cargoadmisionServicioResult");
        div.innerHTML = div.dir;
        // Crea un elemento <table> y un elemento <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");

        var thArray = ['Cantidad', 'Servicio', 'Descripción', 'Fecha/hora', 'Precio', 'Subtotal', 'IVA', 'Total', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <tbody>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < cargoadmisionArray.length; i++) {

            var totalServicio = parseFloat(cargoadmisionArray[i]["total"]);
            var status = cargoadmisionArray[i]["status"];

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 5){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 6){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["iva"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 7){
                    var textoCelda = document.createTextNode(cargoadmisionArray[i]["total"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 8){

                    <!-- View Modal Structure -->
                    var divcargosAdmision = document.getElementById('cargosAdmision')
                    var divViewModalCargoadmision = document.createElement('div')
                    divViewModalCargoadmision.setAttribute ( 'id', 'view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divViewModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Cargo-consulta");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Servicio:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    var divCol3 = document.createElement('div')
                    divCol3.className = "col s4";
                    var divLabelContainer3 = document.createElement('div')
                    divLabelContainer3.className = "label-container";
                    var label3 = document.createElement('label')
                    var textlabel3 = document.createTextNode("Descripción:");
                    label3.appendChild(textlabel3);
                    var p3 = document.createElement('p')
                    var textp3 = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3.appendChild(textp3);
                    divLabelContainer3.appendChild(label3);
                    divLabelContainer3.appendChild(p3);
                    divCol3.appendChild(divLabelContainer3);
                    var divCol4 = document.createElement('div')
                    divCol4.className = "col s4";
                    var divLabelContainer4 = document.createElement('div')
                    divLabelContainer4.className = "label-container";
                    var label4 = document.createElement('label')
                    var textlabel4 = document.createTextNode("Fecha/Hora:");
                    label4.appendChild(textlabel4);
                    var p4 = document.createElement('p')
                    var textp4 = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4.appendChild(textp4);
                    divLabelContainer4.appendChild(label4);
                    divLabelContainer4.appendChild(p4);
                    divCol4.appendChild(divLabelContainer4);
                    var divCol5 = document.createElement('div')
                    divCol5.className = "col s4";
                    var divLabelContainer5 = document.createElement('div')
                    divLabelContainer5.className = "label-container";
                    var label5 = document.createElement('label')
                    var textlabel5 = document.createTextNode("Precio:");
                    label5.appendChild(textlabel5);
                    var p5 = document.createElement('p')
                    var textp5 = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5.appendChild(textp5);
                    divLabelContainer5.appendChild(label5);
                    divLabelContainer5.appendChild(p5);
                    divCol5.appendChild(divLabelContainer5);
                    var divCol6 = document.createElement('div')
                    divCol6.className = "col s4";
                    var divLabelContainer6 = document.createElement('div')
                    divLabelContainer6.className = "label-container";
                    var label6 = document.createElement('label')
                    var textlabel6 = document.createTextNode("Subtotal:");
                    label6.appendChild(textlabel6);
                    var p6 = document.createElement('p')
                    var textp6 = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6.appendChild(textp6);
                    divLabelContainer6.appendChild(label6);
                    divLabelContainer6.appendChild(p6);
                    divCol6.appendChild(divLabelContainer6);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(divCol3);
                    fieldset.appendChild(divCol4);
                    fieldset.appendChild(divCol5);
                    fieldset.appendChild(divCol6);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divViewModalFooter = document.createElement('div')
                    divViewModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divViewModalFooter.appendChild(linkCerrar);
                    divViewModalCargoadmision.appendChild(br);
                    divViewModalCargoadmision.appendChild(h4);
                    divViewModalCargoadmision.appendChild(divRow);
                    divViewModalCargoadmision.appendChild(divViewModalFooter);
                    divcargosAdmision.appendChild(divViewModalCargoadmision);
                    <!-- End View Modal Structure -->

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-cargoadmisionServicio');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(cargoadmisionArray[i]["cargoadmision_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Servicio:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(cargoadmisionArray[i]["servicio"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    var divCol3Delete = document.createElement('div')
                    divCol3Delete.className = "col s4";
                    var divLabelContainer3Delete = document.createElement('div')
                    divLabelContainer3Delete.className = "label-container";
                    var label3Delete = document.createElement('label')
                    var textlabel3Delete = document.createTextNode("Descripción:");
                    label3Delete.appendChild(textlabel3Delete);
                    var p3Delete = document.createElement('p')
                    var textp3Delete = document.createTextNode(cargoadmisionArray[i]["descripcion"]);
                    p3Delete.appendChild(textp3Delete);
                    divLabelContainer3Delete.appendChild(label3Delete);
                    divLabelContainer3Delete.appendChild(p3Delete);
                    divCol3Delete.appendChild(divLabelContainer3Delete);
                    var divCol4Delete = document.createElement('div')
                    divCol4Delete.className = "col s4";
                    var divLabelContainer4Delete = document.createElement('div')
                    divLabelContainer4Delete.className = "label-container";
                    var label4Delete = document.createElement('label')
                    var textlabel4Delete = document.createTextNode("Fecha/Hora:");
                    label4Delete.appendChild(textlabel4Delete);
                    var p4Delete = document.createElement('p')
                    var textp4Delete = document.createTextNode(cargoadmisionArray[i]["fechahora"]);
                    p4Delete.appendChild(textp4Delete);
                    divLabelContainer4Delete.appendChild(label4Delete);
                    divLabelContainer4Delete.appendChild(p4Delete);
                    divCol4Delete.appendChild(divLabelContainer4Delete);
                    var divCol5Delete = document.createElement('div')
                    divCol5Delete.className = "col s4";
                    var divLabelContainer5Delete = document.createElement('div')
                    divLabelContainer5Delete.className = "label-container";
                    var label5Delete = document.createElement('label')
                    var textlabel5Delete = document.createTextNode("Precio:");
                    label5Delete.appendChild(textlabel5Delete);
                    var p5Delete = document.createElement('p')
                    var textp5Delete = document.createTextNode(cargoadmisionArray[i]["precio"]);
                    p5Delete.appendChild(textp5Delete);
                    divLabelContainer5Delete.appendChild(label5Delete);
                    divLabelContainer5Delete.appendChild(p5Delete);
                    divCol5Delete.appendChild(divLabelContainer5Delete);
                    var divCol6Delete = document.createElement('div')
                    divCol6Delete.className = "col s4";
                    var divLabelContainer6Delete = document.createElement('div')
                    divLabelContainer6Delete.className = "label-container";
                    var label6Delete = document.createElement('label')
                    var textlabel6Delete = document.createTextNode("Subtotal:");
                    label6Delete.appendChild(textlabel6Delete);
                    var p6Delete = document.createElement('p')
                    var textp6Delete = document.createTextNode(cargoadmisionArray[i]["subtotal"]);
                    p6Delete.appendChild(textp6Delete);
                    divLabelContainer6Delete.appendChild(label6Delete);
                    divLabelContainer6Delete.appendChild(p6Delete);
                    divCol6Delete.appendChild(divLabelContainer6Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(divCol3Delete);
                    fieldsetDelete.appendChild(divCol4Delete);
                    fieldsetDelete.appendChild(divCol5Delete);
                    fieldsetDelete.appendChild(divCol6Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarCargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->

                    var link1 = document.createElement("a");
                    link1.className = "modal-trigger";
                    link1.setAttribute ( 'data-position', 'left' );
                    link1.setAttribute ( 'data-tooltip', 'Visualizar' );
                    link1.setAttribute ( 'href', '#view-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var vista = document.createElement("i");
                    vista.className = "green-text text-darken-2 tiny mdi-image-remove-red-eye pointer";

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'Eliminar' );
                    link3.setAttribute ( 'href', '#delete-modal-cargoadmisionServicio-'+cargoadmisionArray[i]["idcargoadmision"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    link1.appendChild(vista);
                    celda.appendChild(link1);
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // appends <table> into <body>
        div.appendChild(tabla);
    }

    var total = 0;
    var subTotal = 0;
    var ivaActual = 0;
    var anticipoCantidad = 0;
    var admision_tipodepago = "no identificado";
    var cuentaPagada = false;
    function totalResponse(tipoAccion=null, iva, status, totalArticulo=null, totalServicio=null, tipo=null, AnticipoCantidad=null, Tipodepago='nulo', referenciapago) {

        // restar el anticipo del total de la cuenta y que var anticipoCantidad sea igual a anticipoCantidad

        if(tipoAccion == 'resta') {

            subTotal += totalArticulo + totalServicio; // Adeudo Actual

            if (iva != null) {
                ivaActual += iva
                iva = ivaActual
                total = total + iva
                iva = iva.toFixed(5)
            } else {
                iva = $('#iva-' + tipo).val()
                //iva = ivaActual
            }
        }
        if(tipoAccion == 'igual'){

            total += totalArticulo + totalServicio; // Total
            subTotal += totalArticulo+totalServicio; // Adeudo Actual
            if(iva != null){
                ivaActual += iva
                iva = ivaActual
                iva = iva.toFixed(5)
            }else{
                iva = $('#iva-'+tipo).val()
                //iva = ivaActual
            }
        }

        if(tipoAccion == 'eliminar'){
            subTotal += totalArticulo + totalServicio; // Adeudo Actual
            alert(subTotal);
            if (iva != null) {
                ivaActual += iva
                iva = ivaActual
                total = total + iva
                iva = iva.toFixed(5)
            } else {
                iva = $('#iva-' + tipo).val()
                //iva = ivaActual
            }
            var realSubTotal = subTotal - iva; // SubTotal sin iva
            total = subTotal
            realSubTotal = realSubTotal.toFixed(5); // Limitamos decimales a 5
        }else{
            var realSubTotal = total - iva; // SubTotal sin iva
            realSubTotal = realSubTotal.toFixed(5); // Limitamos decimales a 5
        }

        //var realSubTotal = subTotal - iva; // SubTotal sin iva
        //realSubTotal = realSubTotal.toFixed(5); // Limitamos decimales a 5

        if (isNaN(subTotal)) subTotal = 0;

        anticipoCantidad += Number(AnticipoCantidad);

        if(tipo == "consulta"){

            // Creamos los elementos de Pago Consulta
            var pagoConsulta = document.getElementById("pagoConsulta");
            pagoConsulta.innerHTML = pagoConsulta.dir;

            var divCantidadRestantePago = document.createElement('div')
            divCantidadRestantePago.className = "col s12";
            var spanPago = document.createElement('span')
            var cantidadRestantePago = document.createTextNode("Cantidad restante: "+subTotal);
            spanPago.appendChild(cantidadRestantePago);
            divCantidadRestantePago.appendChild(spanPago);
            pagoConsulta.appendChild(divCantidadRestantePago);
            var br1 = document.createElement('br')
            pagoConsulta.appendChild(br1);

            var divMetodoDePago = document.createElement('div')
            divMetodoDePago.className = "col s12";
            divMetodoDePago.setAttribute ( 'id', 'divMetodoDePago' );
            var spanMetodoDePago = document.createElement('span')
            var metodoDePago = document.createTextNode("Método de pago: ");
            spanMetodoDePago.appendChild(metodoDePago);
            divMetodoDePago.appendChild(spanMetodoDePago);

            var select = document.createElement('select');
            select.style.display = "inline";
            select.style.width = "auto";
            select.style.height = "auto";
            select.setAttribute ( 'id', 'select_metodo_de_pago' );
            var metodosArray = ["Efectivo", "Tarjeta de credito", "Tarjeta de debito", "Cheque", "SPEI", "No identificado"];
            // agregamos los valores <option> a seleccionar
            for($i=0; $i<=metodosArray.length; $i++){
                var selectOption = new Option(metodosArray[$i],metodosArray[$i]);
                select.appendChild(selectOption);
            }
            divMetodoDePago.appendChild(select);

            var span2 = document.createElement('span')
            var espacio = document.createTextNode("   ");
            span2.appendChild(espacio);
            divMetodoDePago.appendChild(span2);

            var inputMetodoDePago = document.createElement('input')
            inputMetodoDePago.style.width = "auto";
            inputMetodoDePago.setAttribute ( 'id', 'input_pago_consulta' );
            inputMetodoDePago.setAttribute ( 'type', 'text' );
            inputMetodoDePago.setAttribute ( 'name', 'pago' );
            inputMetodoDePago.setAttribute ( 'value', subTotal );
            inputMetodoDePago.setAttribute ( 'readonly', 'readonly');
            divMetodoDePago.appendChild(inputMetodoDePago);
            pagoConsulta.appendChild(divMetodoDePago);

            var divInputNotaPago = document.createElement('div')
            divInputNotaPago.className = "input-field col s12";
            var inputNotaPago = document.createElement('input')
            inputNotaPago.setAttribute ( 'id', 'input_nota_pago' );
            inputNotaPago.setAttribute ( 'type', 'text' );
            inputNotaPago.setAttribute ( 'name', 'nota_pago' );
            divInputNotaPago.appendChild(inputNotaPago);
            var labelNotaPago = document.createElement('label')
            var notaPago = document.createTextNode("Nota")
            labelNotaPago.appendChild(notaPago);
            labelNotaPago.setAttribute ( 'for', 'input_nota_pago' );
            divInputNotaPago.appendChild(labelNotaPago);
            pagoConsulta.appendChild(divInputNotaPago);

            var divBotonPagar = document.createElement('div')
            divBotonPagar.className = "right col s4";
            divBotonPagar.setAttribute ( 'id', 'divBotonConsultaPagarPago' );
            var botonPagar = document.createElement('button')
            botonPagar.className = "btn waves-effect waves-light";
            botonPagar.style.width = "auto";
            botonPagar.style.height = "45px";
            botonPagar.style.marginTop = "20px";
            var textBotonPagar = document.createTextNode("Pagar");
            botonPagar.appendChild(textBotonPagar);
            divBotonPagar.appendChild(botonPagar);
            pagoConsulta.appendChild(divBotonPagar);
            // Creamos los elementos de Pago Consulta

            var divTotalSuperior = document.getElementById("totalSuperior");
            divTotalSuperior.innerHTML = divTotalSuperior.dir;
            var divSubTotal = document.createElement('div');
            divSubTotal.className = "col s3";
            var divStatus = document.createElement('div');
            divStatus.className = "col s3";
            var textoSubTotal = document.createTextNode(" Total: $"+subTotal.toFixed(2)+" MXN");
            var textoStatus = document.createTextNode("Status: "+status);
            divSubTotal.appendChild(textoSubTotal);
            divStatus.appendChild(textoStatus);
            divTotalSuperior.appendChild(divSubTotal);
            divTotalSuperior.appendChild(divStatus);

            var divTotalInferior = document.getElementById("totalInferior");
            divTotalInferior.innerHTML = divTotalInferior.dir;
            var h5 = document.createElement('h5')
            h5.className = "right-align";
            var textoServicioTotal = document.createTextNode("Sub-Total: $"+realSubTotal+" MXN");
            h5.appendChild(textoServicioTotal)
            divTotalInferior.appendChild(h5)
            var h5 = document.createElement('h5')
            h5.className = "right-align";
            var textoServicioIvaCantidad = document.createTextNode("IVA: $"+iva+" MXN");
            h5.appendChild(textoServicioIvaCantidad);
            divTotalInferior.appendChild(h5);
            var inputHiddenIVA = document.createElement('input')
            inputHiddenIVA.setAttribute ( 'type', 'hidden' );
            inputHiddenIVA.setAttribute ( 'value', iva );
            inputHiddenIVA.setAttribute ( 'id', 'iva-consulta' );
            divTotalInferior.appendChild(inputHiddenIVA);
            var h4 = document.createElement('h4');
            h4.className = "right-align";
            var textoServicioSubTotal = document.createTextNode("Total: $"+total.toFixed(2)+" MXN");
            h4.appendChild(textoServicioSubTotal)
            divTotalInferior.appendChild(h4)
            var h4 = document.createElement('h4');
            h4.className = "right-align";
            var textoServicioSubTotal = document.createTextNode("Adeudo actual: $"+subTotal.toFixed(2)+" MXN");
            h4.appendChild(textoServicioSubTotal)
            divTotalInferior.appendChild(h4)

            var divbotonPagarAnticipo = document.getElementById("botonPagarAnticipoConsulta");
            divbotonPagarAnticipo.innerHTML = divbotonPagarAnticipo.dir;
            var buttonPagarAnticipo = document.createElement('button')
            buttonPagarAnticipo.setAttribute ( 'id', 'butonPagarAnticipoConsulta' );
            buttonPagarAnticipo.setAttribute ( 'href', '#create-modal-pagar-consulta' );
            buttonPagarAnticipo.className = "modal-trigger btn waves-effect waves-light";
            buttonPagarAnticipo.style.width = "100%";
            buttonPagarAnticipo.style.height = "45px";
            buttonPagarAnticipo.style.marginTop = "53px";
            var textoButtonPagarAnticipo = document.createTextNode("Pagar");
            buttonPagarAnticipo.appendChild(textoButtonPagarAnticipo)
            divbotonPagarAnticipo.appendChild(buttonPagarAnticipo)
            //botonPagarAnticipo
            $('.modal-trigger').leanModal();

            <?php /*
            var divbotonGenerarFactura = document.getElementById("botonGenerarFactura");
            divbotonGenerarFactura.innerHTML = divbotonGenerarFactura.dir;
            var buttonGenerarFactura = document.createElement('button')
            buttonGenerarFactura.setAttribute ( 'id', 'buttonGenerarFacturaConsulta' );
            buttonGenerarFactura.style.width = "100%";
            buttonGenerarFactura.style.height = "45px";
            buttonGenerarFactura.style.marginTop = "20px";
            buttonGenerarFactura.className = "btn waves-effect waves-light disabled";
            buttonGenerarFactura.setAttribute ( 'type', 'submit' );
            var textoButtonGenerarFactura = document.createTextNode("Generar Factura");
            buttonGenerarFactura.appendChild(textoButtonGenerarFactura)
            divbotonGenerarFactura.appendChild(buttonGenerarFactura)
             *
             */?>

            <?php /*
           var divbotonGenerarNota = document.getElementById("botonGenerarNota");
           divbotonGenerarNota.innerHTML = divbotonGenerarNota.dir;
           var buttonGenerarNota = document.createElement('button')
           buttonGenerarNota.setAttribute ( 'id', 'buttonGenerarNotaConsulta' );

           buttonGenerarNota.style.width = "100%";
           buttonGenerarNota.style.height = "45px";
           buttonGenerarNota.style.marginTop = "20px";
           buttonGenerarNota.className = "btn waves-effect waves-light disabled";
           buttonGenerarNota.setAttribute ( 'type', 'submit' );
           var textoButtonGenerarNota = document.createTextNode("Generar Nota");
           buttonGenerarNota.appendChild(textoButtonGenerarNota)
           divbotonGenerarNota.appendChild(buttonGenerarNota)
             *
             */?>

            <?php /*
            var divbotoVerFactura = document.getElementById("botonVerFactura");
            divbotoVerFactura.innerHTML = divbotoVerFactura.dir;
            var buttonVerFactura = document.createElement('button')
            buttonVerFactura.setAttribute ( 'id', 'buttonVerFacturaConsulta' );
            buttonVerFactura.style.width = "100%";
            buttonVerFactura.style.height = "45px";
            buttonVerFactura.className = "left btn waves-effect waves-light disabled";
            buttonVerFactura.setAttribute ( 'type', 'submit' );
            var textoButtonVerFactura = document.createTextNode("Ver Factura");
            buttonVerFactura.appendChild(textoButtonVerFactura)
            divbotoVerFactura.appendChild(buttonVerFactura)
             *
             */?>
        }

        if(tipo == "admision"){

            // Creamos los elementos de Anticipo admision
            var anticipoAdmision = document.getElementById("anticipoAdmision");
            anticipoAdmision.innerHTML = anticipoAdmision.dir;

            var divCantidadRestanteAnticipo = document.createElement('div')
            divCantidadRestanteAnticipo.className = "col s12";
            var spanAnticipo = document.createElement('span')
            var cantidadRestanteAnticipo = document.createTextNode("Cantidad restante: "+subTotal);
            spanAnticipo.appendChild(cantidadRestanteAnticipo);
            divCantidadRestanteAnticipo.appendChild(spanAnticipo);
            anticipoAdmision.appendChild(divCantidadRestanteAnticipo);
            var brAnticipo1 = document.createElement('br')
            anticipoAdmision.appendChild(brAnticipo1);

            var divMetodoDeAnticipo = document.createElement('div')
            divMetodoDeAnticipo.className = "col s12";
            divMetodoDeAnticipo.setAttribute ( 'id', 'divMetodoDeAnticipo' );
            var spanMetodoDeAnticipo = document.createElement('span')
            var metodoDeAnticipo = document.createTextNode("Método de pago: ");
            spanMetodoDeAnticipo.appendChild(metodoDeAnticipo);
            divMetodoDeAnticipo.appendChild(spanMetodoDeAnticipo);

            var selectAnticipo = document.createElement('select');
            selectAnticipo.style.display = "inline";
            selectAnticipo.style.width = "auto";
            selectAnticipo.style.height = "auto";
            selectAnticipo.setAttribute ( 'id', 'select_metodo_de_anticipo' );
            var metodosAnticipoArray = ["Efectivo", "Tarjeta de credito", "Tarjeta de debito", "Cheque", "SPEI", "No identificado"];
            // agregamos los valores <option> a seleccionar
            for($i=0; $i<=metodosAnticipoArray.length; $i++){
                var selectAnticipoOption = new Option(metodosAnticipoArray[$i],metodosAnticipoArray[$i]);
                selectAnticipo.appendChild(selectAnticipoOption);
            }
            divMetodoDeAnticipo.appendChild(selectAnticipo);

            var span2Anticipo = document.createElement('span')
            var espacioAnticipo = document.createTextNode("   ");
            span2Anticipo.appendChild(espacioAnticipo);
            divMetodoDeAnticipo.appendChild(span2Anticipo);

            var inputAnticipo = document.createElement('input')
            inputAnticipo.style.width = "auto";
            inputAnticipo.setAttribute ( 'id', 'input_anticipo_admision' );
            inputAnticipo.type = 'number';
            inputAnticipo.min ="1";
            inputAnticipo.max = subTotal;
            inputAnticipo.setAttribute ( 'name', 'anticipo' );
            inputAnticipo.setAttribute ( 'value', subTotal );
            divMetodoDeAnticipo.appendChild(inputAnticipo);
            anticipoAdmision.appendChild(divMetodoDeAnticipo);

            /*
             var divInputAnticipo = document.createElement('div')
             divInputAnticipo.className = "col s12";
             var inputAnticipo = document.createElement('input')
             inputAnticipo.style.width = "auto";
             inputAnticipo.setAttribute ( 'id', 'input_anticipo_admision' );
             inputAnticipo.type = 'number';
             inputAnticipo.min ="1";
             inputAnticipo.max = subTotal;
             inputAnticipo.setAttribute ( 'name', 'anticipo' );
             inputAnticipo.setAttribute ( 'value', subTotal );
             divInputAnticipo.appendChild(inputAnticipo);
             anticipoAdmision.appendChild(divInputAnticipo);
             */

            var divInputNotaAnticipo = document.createElement('div')
            divInputNotaAnticipo.className = "input-field col s12";
            var inputNotaAnticipo = document.createElement('input')
            inputNotaAnticipo.setAttribute ( 'id', 'input_nota_anticipo' );
            inputNotaAnticipo.setAttribute ( 'type', 'text' );
            inputNotaAnticipo.setAttribute ( 'name', 'nota_anticipo' );
            divInputNotaAnticipo.appendChild(inputNotaAnticipo);
            var labelNotaAnticipo = document.createElement('label')
            var notaAnticipo = document.createTextNode("Nota")
            labelNotaAnticipo.appendChild(notaAnticipo);
            labelNotaAnticipo.setAttribute ( 'for', 'input_nota_anticipo' );
            divInputNotaAnticipo.appendChild(labelNotaAnticipo);
            anticipoAdmision.appendChild(divInputNotaAnticipo);

            var divBotonPagarAnticipo = document.createElement('div')
            divBotonPagarAnticipo.className = "right col s4";
            divBotonPagarAnticipo.setAttribute ( 'id', 'divBotonAdmisionPagarAnticipo' );
            var botonPagarAnticipo = document.createElement('button')
            botonPagarAnticipo.className = "btn waves-effect waves-light";
            botonPagarAnticipo.style.width = "auto";
            botonPagarAnticipo.style.height = "45px";
            botonPagarAnticipo.style.marginTop = "20px";
            var textBotonPagarAnticipo = document.createTextNode("Pagar");
            botonPagarAnticipo.appendChild(textBotonPagarAnticipo);
            divBotonPagarAnticipo.appendChild(botonPagarAnticipo);
            anticipoAdmision.appendChild(divBotonPagarAnticipo);
            // Creamos los elementos de Anticipo admision

            // Creamos los elementos de Pago admision
            var pagoAdmision = document.getElementById("pagoAdmision");
            pagoAdmision.innerHTML = pagoAdmision.dir;

            var divCantidadRestantePago = document.createElement('div')
            divCantidadRestantePago.className = "col s12";
            var spanPago = document.createElement('span')
            var cantidadRestantePago = document.createTextNode("Cantidad restante: "+subTotal);
            spanPago.appendChild(cantidadRestantePago);
            divCantidadRestantePago.appendChild(spanPago);
            pagoAdmision.appendChild(divCantidadRestantePago);
            var br1 = document.createElement('br')
            pagoAdmision.appendChild(br1);

            var divMetodoDePago = document.createElement('div')
            divMetodoDePago.className = "col s12";
            divMetodoDePago.setAttribute ( 'id', 'divMetodoDePago' );
            var spanMetodoDePago = document.createElement('span')
            var metodoDePago = document.createTextNode("Método de pago: ");
            spanMetodoDePago.appendChild(metodoDePago);
            divMetodoDePago.appendChild(spanMetodoDePago);

            var select = document.createElement('select');
            select.style.display = "inline";
            select.style.width = "auto";
            select.style.height = "auto";
            select.setAttribute ( 'id', 'select_metodo_de_pago' );
            var metodosArray = ["Efectivo", "Tarjeta de credito", "Tarjeta de debito", "Cheque", "SPEI", "No identificado"];
            // agregamos los valores <option> a seleccionar
            for($i=0; $i<=metodosArray.length; $i++){
                var selectOption = new Option(metodosArray[$i],metodosArray[$i]);
                select.appendChild(selectOption);
            }
            divMetodoDePago.appendChild(select);

            var span2 = document.createElement('span')
            var espacio = document.createTextNode("   ");
            span2.appendChild(espacio);
            divMetodoDePago.appendChild(span2);

            var inputMetodoDePago = document.createElement('input')
            inputMetodoDePago.style.width = "auto";
            inputMetodoDePago.setAttribute ( 'id', 'input_pago_admision' );
            inputMetodoDePago.setAttribute ( 'type', 'text' );
            inputMetodoDePago.setAttribute ( 'name', 'pago' );
            inputMetodoDePago.setAttribute ( 'value', subTotal );
            inputMetodoDePago.setAttribute ( 'readonly', 'readonly');
            divMetodoDePago.appendChild(inputMetodoDePago);
            pagoAdmision.appendChild(divMetodoDePago);

            var divInputNotaPago = document.createElement('div')
            divInputNotaPago.className = "input-field col s12";
            var inputNotaPago = document.createElement('input')
            inputNotaPago.setAttribute ( 'id', 'input_nota_pago' );
            inputNotaPago.setAttribute ( 'type', 'text' );
            inputNotaPago.setAttribute ( 'name', 'nota_pago' );
            divInputNotaPago.appendChild(inputNotaPago);
            var labelNotaPago = document.createElement('label')
            var notaPago = document.createTextNode("Nota")
            labelNotaPago.appendChild(notaPago);
            labelNotaPago.setAttribute ( 'for', 'input_nota_pago' );
            divInputNotaPago.appendChild(labelNotaPago);
            pagoAdmision.appendChild(divInputNotaPago);

            var divBotonPagar = document.createElement('div')
            divBotonPagar.className = "right col s4";
            divBotonPagar.setAttribute ( 'id', 'divBotonAdmisionPagarPago' );
            var botonPagar = document.createElement('button')
            botonPagar.className = "btn waves-effect waves-light";
            botonPagar.style.width = "auto";
            botonPagar.style.height = "45px";
            botonPagar.style.marginTop = "20px";
            var textBotonPagar = document.createTextNode("Pagar");
            botonPagar.appendChild(textBotonPagar);
            divBotonPagar.appendChild(botonPagar);
            pagoAdmision.appendChild(divBotonPagar);
            // Creamos los elementos de Pago admision

            var divTotalSuperior = document.getElementById("totalSuperiorAdmision");
            divTotalSuperior.innerHTML = divTotalSuperior.dir;
            var divSubTotal = document.createElement('div');
            divSubTotal.className = "col s3";
            var divAnticipo = document.createElement('div');
            divAnticipo.className = "col s3";
            var divStatus = document.createElement('div');
            divStatus.className = "col s3";
            var textoSubTotal = document.createTextNode(" Total: $"+total.toFixed(2)+" MXN");
            var verAdmisionanticipo = document.createElement("i");
            verAdmisionanticipo.className = "blue-text text-darken-2 tiny mdi-action-assignment pointer";
            verAdmisionanticipo.setAttribute ( 'id', 'verAdmisionanticipo' );
            var textoAnticipo = document.createTextNode("Anticipo: "+anticipoCantidad+" MXN");
            var textoStatus = document.createTextNode("Status: "+status);
            divSubTotal.appendChild(textoSubTotal);
            divAnticipo.appendChild(textoAnticipo);
            divAnticipo.appendChild(verAdmisionanticipo);
            divStatus.appendChild(textoStatus);
            divTotalSuperior.appendChild(divSubTotal);
            divTotalSuperior.appendChild(divAnticipo);
            divTotalSuperior.appendChild(divStatus);

            var divTotalInferior = document.getElementById("totalInferiorAdmision");
            divTotalInferior.innerHTML = divTotalInferior.dir;
            var h5 = document.createElement('h5')
            h5.className = "right-align";
            var textoServicioTotal = document.createTextNode("Sub-Total: $"+realSubTotal+" MXN");
            h5.appendChild(textoServicioTotal)
            divTotalInferior.appendChild(h5)
            var h5 = document.createElement('h5')
            h5.className = "right-align";
            var textoServicioIvaCantidad = document.createTextNode("IVA: $"+iva+" MXN");
            h5.appendChild(textoServicioIvaCantidad)
            divTotalInferior.appendChild(h5)
            var inputHiddenIVA = document.createElement('input')
            inputHiddenIVA.setAttribute ( 'type', 'hidden' );
            inputHiddenIVA.setAttribute ( 'value', iva );
            inputHiddenIVA.setAttribute ( 'id', 'iva-admision' );
            divTotalInferior.appendChild(inputHiddenIVA);
            var h4 = document.createElement('h4');
            h4.className = "right-align";
            var textoServicioSubTotal = document.createTextNode("Total: $"+total.toFixed(2)+" MXN");
            h4.appendChild(textoServicioSubTotal)
            divTotalInferior.appendChild(h4)
            var h4 = document.createElement('h4')
            h4.className = "right-align";
            var textoServicioSubTotal = document.createTextNode("Adeudo actual: $"+subTotal.toFixed(2)+" MXN");
            h4.appendChild(textoServicioSubTotal)
            divTotalInferior.appendChild(h4)

            var divbotonPagarAnticipo = document.getElementById("botonPagarAnticipoAdmision");
            divbotonPagarAnticipo.innerHTML = divbotonPagarAnticipo.dir;
            var buttonPagarAnticipo = document.createElement('button')
            buttonPagarAnticipo.setAttribute ( 'id', 'butonPagarAnticipoAdmision' );
            buttonPagarAnticipo.setAttribute ( 'href', '#create-modal-pagar-admision' );
            buttonPagarAnticipo.className = "modal-trigger btn waves-effect waves-light";
            buttonPagarAnticipo.style.width = "100%";
            buttonPagarAnticipo.style.height = "45px";
            buttonPagarAnticipo.style.marginTop = "53px";
            var textoButtonPagarAnticipo = document.createTextNode("Pagar/Anticipo");
            buttonPagarAnticipo.appendChild(textoButtonPagarAnticipo)
            divbotonPagarAnticipo.appendChild(buttonPagarAnticipo)
            //botonPagarAnticipo
            $('.modal-trigger').leanModal();

            <?php /*
            var divbotonGenerarFactura = document.getElementById("botonGenerarFacturaAdmision");
            divbotonGenerarFactura.innerHTML = divbotonGenerarFactura.dir;
            var buttonGenerarFactura = document.createElement('button')
            buttonGenerarFactura.setAttribute ( 'id', 'buttonGenerarFacturaAdmision' );
            buttonGenerarFactura.style.width = "100%";
            buttonGenerarFactura.style.height = "45px";
            buttonGenerarFactura.style.marginTop = "20px";
            buttonGenerarFactura.className = "btn waves-effect waves-light disabled";
            buttonGenerarFactura.setAttribute ( 'type', 'submit' );
            var textoButtonGenerarFactura = document.createTextNode("Generar Factura");
            buttonGenerarFactura.appendChild(textoButtonGenerarFactura)
            divbotonGenerarFactura.appendChild(buttonGenerarFactura)
             * 
             */?>

            <?php /*
            var divbotonGenerarNota = document.getElementById("botonGenerarNotaAdmision");
            divbotonGenerarNota.innerHTML = divbotonGenerarNota.dir;
            var buttonGenerarNota = document.createElement('button')
            buttonGenerarNota.setAttribute ( 'id', 'buttonGenerarNotaAdmision' );
            buttonGenerarNota.style.width = "100%";
            buttonGenerarNota.style.height = "45px";
            buttonGenerarNota.style.marginTop = "20px";
            buttonGenerarNota.className = "btn waves-effect waves-light disabled";
            buttonGenerarNota.setAttribute ( 'type', 'submit' );
            var textoButtonGenerarNota = document.createTextNode("Generar Nota");
            buttonGenerarNota.appendChild(textoButtonGenerarNota)
            divbotonGenerarNota.appendChild(buttonGenerarNota)
             * 
             */ ?>

            <?php /*
            var divbotoVerFactura = document.getElementById("botonVerFacturaAdmision");
            divbotoVerFactura.innerHTML = divbotoVerFactura.dir;
            var buttonVerFactura = document.createElement('button')
            buttonVerFactura.setAttribute ( 'id', 'buttonVerFacturaAdmision' );
            buttonVerFactura.style.width = "100%";
            buttonVerFactura.style.height = "45px";
            buttonVerFactura.className = "left btn waves-effect waves-light disabled";
            buttonVerFactura.setAttribute ( 'type', 'submit' );
            var textoButtonVerFactura = document.createTextNode("Ver Factura");
            buttonVerFactura.appendChild(textoButtonVerFactura)
            divbotoVerFactura.appendChild(buttonVerFactura)
             * 
             */?>
        }
        $("#divBotonAdmisionPagarAnticipo").click(function() {

            // Si el método de pago es con tarjeta, le solicitamos al usuario la referencia de la tarjeta)
            if($("#select_metodo_de_anticipo").val() == 'Tarjeta de credito' || $("#select_metodo_de_anticipo").val() == 'Tarjeta de debito'){
                var admision_referenciapagoAnticipo = prompt("Por favor ingresa la referencia de la tarjeta", "1234");
            }

            //Obtenemos el valor del input de divInputAnticipo
            var anticipoAdmision = $("input#input_anticipo_admision").val();

            if(anticipoAdmision > subTotal || anticipoAdmision < 0){
                alert("La cantidad agregada: "+anticipoAdmision+" no puede ser mayor a: "+subTotal+" ni menor o igual a 0.")
                return false;
            }
            var idadmision = $("input#idadmision").val();
            var notaAnticipoAdmision = $("input#input_nota_anticipo").val();

            //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
            var dataString = 'idadmision=' + idadmision + '&admisionanticipo_cantidad=' + anticipoAdmision + '&admisionanticipo_nota=' + notaAnticipoAdmision + '&admisionanticipo_tipo=' + $("#select_metodo_de_anticipo").val();

            $.ajax({
                type: "POST",
                url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                dataType : 'json',
                data: dataString,
                async: false,
                jsonpCallback: 'callback',
                success: function(data) {

                    alert("Se agregó exitosamente el anticipo de: "+anticipoAdmision+" MXN")

                    admisionanticipoArray = []
                    var admisionanticipoEntity = data.admisionanticipoArray
                    $.each( admisionanticipoEntity, function( key, value ) {
                        admisionanticipoArray.push({
                            "idadmisionanticipo" : value.idadmisionanticipo,
                            "idadmision" : value.idadmision,
                            "admisionanticipo_fecha" : value.admisionanticipo_fecha,
                            "admisionanticipo_cantidad" : value.admisionanticipo_cantidad,
                            "admisionanticipo_nota" : value.admisionanticipo_nota,
                            "admisionanticipo_tipo" : value.admisionanticipo_tipo
                        });
                    });

                    totalResponse('resta', null, status, -(anticipoAdmision), null, 'admision', anticipoAdmision, $("#select_metodo_de_anticipo").val(), admision_referenciapagoAnticipo)

                },
                error: function(data){
                    alert("Error al intentar guardar admision-anticipo > "+ data.admisionanticipoArray)
                }
            });

            return false;
        });

        $("#divBotonAdmisionPagarPago").click(function() {

            // Si el método de pago es con tarjeta, le solicitamos al usuario la referencia de la tarjeta)
            if($("#select_metodo_de_pago").val() == 'Tarjeta de credito' || $("#select_metodo_de_pago").val() == 'Tarjeta de debito'){
                var admision_referenciapago = prompt("Por favor ingresa la referencia de la tarjeta", "1234");
            }

            var pagoAdmision = $("input#input_pago_admision").val();
            if(pagoAdmision > subTotal || pagoAdmision < 0){
                //var pagoAdmision = $("input#divMetodoDePago").val();
                alert("La cantidad agregada: "+pagoAdmision+" no puede ser mayor a: "+subTotal+" ni menor o igual a 0.")
                return false;
            }

            var idadmision = $("input#idadmision").val();
            var notaAnticipoAdmision = $("input#input_nota_anticipo").val();

            //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
            var dataString = 'idadmision=' + idadmision + '&admisionanticipo_cantidad=' + pagoAdmision + '&admisionanticipo_nota=' + notaAnticipoAdmision + '&admisionanticipo_tipo=' + $("#select_metodo_de_pago").val();

            $.ajax({
                type: "POST",
                url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                dataType : 'json',
                data: dataString,
                async: false,
                jsonpCallback: 'callback',
                success: function(data) {

                    alert("Se agregó exitosamente el anticipo de: "+pagoAdmision+" MXN")

                    admisionanticipoArray = []
                    var admisionanticipoEntity = data.admisionanticipoArray
                    $.each( admisionanticipoEntity, function( key, value ) {
                        admisionanticipoArray.push({
                            "idadmisionanticipo" : value.idadmisionanticipo,
                            "idadmision" : value.idadmision,
                            "admisionanticipo_fecha" : value.admisionanticipo_fecha,
                            "admisionanticipo_cantidad" : value.admisionanticipo_cantidad,
                            "admisionanticipo_nota" : value.admisionanticipo_nota,
                            "admisionanticipo_tipo" : value.admisionanticipo_tipo
                        });
                    });

                    totalResponse('resta', null, status, -(pagoAdmision), null, 'admision', pagoAdmision, $("#select_metodo_de_pago").val(), admision_referenciapago)
                },
                error: function(data){
                    alert("Error al intentar guardar admision-anticipo > "+ data.admisionanticipoArray)
                }
            });

            return false;
        });

        $("#divBotonConsultaPagarPago").click(function() {

            // Si el método de pago es con tarjeta, le solicitamos al usuario la referencia de la tarjeta)
            if($("#select_metodo_de_pago").val() == 'Tarjeta de credito' || $("#select_metodo_de_pago").val() == 'Tarjeta de debito'){
                var consulta_referenciapago = prompt("Por favor ingresa la referencia de la tarjeta", "1234");
            }
            var pagoConsulta = $("input#input_pago_consulta").val();
            if(pagoConsulta > subTotal || pagoConsulta < 0){
                //var pagoAdmision = $("input#divMetodoDePago").val();
                alert("La cantidad agregada: "+pagoConsulta+" no puede ser mayor a: "+subTotal+" ni menor o igual a 0.")
                return false;
            }

            var idconsulta = $("input#idconsulta").val();
            var notaAnticipoConsulta = $("input#input_nota_consulta").val();

            //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
            var dataString = 'idconsulta=' + idconsulta + '&consultaanticipo_cantidad=' + pagoConsulta + '&consultaanticipo_nota=' + notaAnticipoConsulta + '&consultaanticipo_tipo=' + $("#select_metodo_de_pago").val();

            $.ajax({
                type: "POST",
                url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                dataType : 'json',
                data: dataString,
                async: false,
                jsonpCallback: 'callback',
                success: function(data) {

                    alert("Se agregó exitosamente el anticipo de: "+pagoConsulta+" MXN")

                    consultaanticipoArray = []
                    var consultaanticipoEntity = data.consultaanticipoArray
                    $.each( consultaanticipoEntity, function( key, value ) {
                        consultaanticipoArray.push({
                            "idconsultaanticipo" : value.idconsultaanticipo,
                            "idconsulta" : value.idconsulta,
                            "consultaanticipo_fecha" : value.consultaanticipo_fecha,
                            "consultaanticipo_cantidad" : value.consultaanticipo_cantidad,
                            "consultaanticipo_nota" : value.consultaanticipo_nota,
                            "consultaanticipo_tipo" : value.consultaanticipo_tipo
                        });
                    });

                    totalResponse('resta', null, status, -(pagoConsulta), null, 'consulta', pagoConsulta, $("#select_metodo_de_pago").val(), consulta_referenciapago)
                },
                error: function(data){
                    alert("Error al intentar guardar consulta-anticipo > "+ data.consultaanticipoArray)
                }
            });

            return false;
        });

        // Si dan clic en verAdmisionanticipo
        $('#verAdmisionanticipo').click(function(){
            var idadmision = $("input#idadmision").val();

            //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
            var dataString = 'ver_admisionanticipo=true'+'&idadmision='+idadmision;
            $.ajax({
                type: "POST",
                url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                dataType : 'json',
                data: dataString,
                async: false,
                jsonpCallback: 'callback',
                success: function(data) {
                    admisionanticipoArray = []
                    var admisionanticipoEntity = data.admisionanticipoArray
                    if(admisionanticipoEntity){
                        $.each( admisionanticipoEntity, function( key, value ) {
                            admisionanticipoArray.push({
                                "idadmisionanticipo" : value.idadmisionanticipo,
                                "idadmision" : value.idadmision,
                                "admisionanticipo_fecha" : value.admisionanticipo_fecha,
                                "admisionanticipo_cantidad" : value.admisionanticipo_cantidad,
                                "admisionanticipo_nota" : value.admisionanticipo_nota,
                                "admisionanticipo_tipo" : value.admisionanticipo_tipo
                            });
                        });
                    }

                    // será un modal
                    generaTablaAdmisionanticipo(admisionanticipoArray)
                    $('#tabla-admisionanticipo').openModal();
                    // esta linea ayuda a crear los modal de la eliminación o edicion de anticipos
                    $('.modal-trigger').leanModal();

                },
                error: function(){
                    alert("Error al intentar visualizar anticipos")
                }
            });
            return false;

        });

        $("#botonAltaPacienteConsulta").click(function() {

            if(status == 'pagada'){

                <?php $idconsulta = isset($idconsultorio)? $idconsultorio:null ?>
                var idconsultorio = "<?php echo $idconsulta ?>";

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'alta_consultorio=true'+'&idconsultorio='+idconsultorio;
                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {

                        // Deshabilitamos el boton botonAltaPacienteConsulta
                        $("#botonAltaPacienteConsulta").addClass('disabled')

                    },
                    error: function(){
                        alert("Error al intentar deshabilitar el botón")
                    }
                });
                return false;
            }

        });

        $("#botonAltaPacienteAdmision").click(function() {
            if(status == 'pagada'){

                <?php $idadmision = isset($idadmision)? $idadmision:null ?>
                var idadmision = "<?php echo $idadmision ?>";

                <?php $idcuarto = isset($idcuarto)? $idcuarto:null ?>
                var idcuarto = "<?php echo $idcuarto ?>";

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'alta_cuarto=true'+'&idcuarto='+idcuarto+'&idadmision='+idadmision;
                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {

                        // Deshabilitamos el boton botonAltaPacienteAdmision
                        $("#botonAltaPacienteAdmision").addClass('disabled')

                    },
                    error: function(){
                        alert("Error al intentar deshabilitar el botón")
                    }
                });
                return false;
            }
        });

        if(subTotal == 0){

            status = 'pagada';

            // Cerramos modal
            $("#create-modal-pagar-admision").closeModal()
            // Deshabilitar el boton de Pago/Anticipo y habilitar los botones de Alta Paciente, Generar Factura y Generar Nota
            $("#nuevoCargoAdmisionArticulo").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
            $("#nuevoCargoAdmisionServicio").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
            $("#butonPagarAnticipoAdmision").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
            $("#botonAltaPacienteAdmision").removeClass('disabled')
            $('#buttonGenerarFacturaAdmision').removeClass('disabled')
            $("#buttonGenerarNotaAdmision").removeClass('disabled')
            //$( "a" ).off();
            //$( "div#totalSuperiorAdmision i" ).off() Comentada temporalmente
            $( "div#cargoadmisionArticuloResult a" ).off()
            $( "div#cargoadmisionServicioResult a" ).off()

            if(tipo == "consulta"){

                var consulta_tipodepago = Tipodepago;

                var idconsulta = $("input#idconsulta").val();

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'subTotalConsulta=' + subTotal + '&idconsulta=' + idconsulta + '&consulta_status=' + status + '&consulta_total=' + anticipoCantidad + "&consulta_tipodepago=" + consulta_tipodepago + '&consulta_referenciapago=' + referenciapago;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {

                        //alert("Cuenta liquidada.")

                        // Cerramos modal
                        $("#create-modal-pagar-consulta").closeModal()
                        // Deshabilitar el boton de Pago/Anticipo y habilitar los botones de Alta Paciente, Generar Factura y Generar Nota
                        $("#nuevoCargoConsultaArticulo").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#nuevoCargoConsultaServicio").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#butonPagarAnticipoConsulta").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#botonAltaPacienteConsulta").removeClass('disabled')
                        $('#buttonGenerarFacturaConsulta').removeClass('disabled')
                        $("#buttonGenerarNotaConsulta").removeClass('disabled')
                        //$( "a" ).off();
                        $( "div#cargoconsultaArticuloResult a" ).off()
                        $( "div#cargoconsultaServicioResult a" ).off()

                    },
                    error: function(){
                        alert("Error al intentar liquidar la cuenta.")
                    }
                });
            }

            if(tipo == "admision"){

                if(Tipodepago == 'nulo') return;

                var admision_tipodepago = Tipodepago;

                var idadmision = $("input#idadmision").val();

                //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
                var dataString = 'subTotalAdmision=' + subTotal + '&idadmision=' + idadmision + '&admision_status=' + status + '&admision_total=' + anticipoCantidad + "&admision_tipodepago=" + admision_tipodepago + "&admision_referenciapago=" + referenciapago;

                $.ajax({
                    type: "POST",
                    url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                    dataType : 'json',
                    data: dataString,
                    async: false,
                    jsonpCallback: 'callback',
                    success: function(data) {

                        alert("Cuenta liquidada.")

                        // Cerramos modal
                        $("#create-modal-pagar-admision").closeModal()
                        // Deshabilitar el boton de Pago/Anticipo y habilitar los botones de Alta Paciente, Generar Factura y Generar Nota
                        $("#nuevoCargoAdmisionArticulo").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#nuevoCargoAdmisionServicio").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#butonPagarAnticipoAdmision").removeClass('modal-trigger').addClass('disabled').removeAttr('href').off( "click");
                        $("#botonAltaPacienteAdmision").removeClass('disabled')
                        $('#buttonGenerarFacturaAdmision').removeClass('disabled')
                        $("#buttonGenerarNotaAdmision").removeClass('disabled')
                        //$( "a" ).off();
                        //$( "div#totalSuperiorAdmision i" ).off() Comentda temporalmente
                        $( "div#cargoadmisionArticuloResult a" ).off()
                        $( "div#cargoadmisionServicioResult a" ).off()

                    },
                    error: function(){
                        alert("Error al intentar liquidar la cuenta.")
                    }
                });
            }
        }
    }

    function generaTablaAdmisionanticipo(admisionanticipoArray) {

        // Crearemos la tabla en un modal, el cual colgaremos del id = cargosAdmision!!!
        var divcargosAdmision = document.getElementById("cargosAdmision");

        // Verificamos si existe la tabla
        if (document.getElementById("tabla-admisionanticipo")) {
            // Eliminamos la tabla existente
            var divModalTablaAdmisionanticipoParaEliminar = document.getElementById("tabla-admisionanticipo");
            divModalTablaAdmisionanticipoParaEliminar.parentNode.removeChild(divModalTablaAdmisionanticipoParaEliminar);
        }

        // Creamos de nuevo la tabla
        var divModalTablaAdmisionanticipo = document.createElement('div');
        divModalTablaAdmisionanticipo.id = "tabla-admisionanticipo";
        divModalTablaAdmisionanticipo.className = "modal bottom-sheet";
        divModalTablaAdmisionanticipo.innerHTML = divModalTablaAdmisionanticipo.dir

        var divRowModalTablaAdmisionanticipo = document.createElement('div')
        divRowModalTablaAdmisionanticipo.className = "row";
        var fieldsetModalTablaAdmisionanticipo = document.createElement('fieldset')
        var legendModalTablaAdmisionanticipo = document.createElement('legend')
        var textlegendModalTablaAdmisionanticipo = document.createTextNode("Anticipos");
        legendModalTablaAdmisionanticipo.appendChild(textlegendModalTablaAdmisionanticipo);
        var divModalContentTablaAdmisionanticipo = document.createElement('div');
        divModalContentTablaAdmisionanticipo.className = 'modal-content';

        // Crea un elemento <table> y un elemento <thead> y <tbody>
        var tabla   = document.createElement("table");
        tabla.className = "hoverable striped";
        var tblHead = document.createElement("thead");
        var tblBody = document.createElement("tbody");
        var thArray = ['Fecha', 'Cantidad', 'Nota', 'Tipo de pago', 'Opciones']

        // Crea las celdas
        for (var i = 0; i < 1; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < thArray.length; j++) {
                // Crea un elemento <th> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <th>, ubica el elemento <th> al final
                // de la hilera de la tabla
                var celda = document.createElement("th");
                var textoCelda = document.createTextNode(thArray[j]);
                celda.appendChild(textoCelda);
                hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblHead)
            tblHead.appendChild(hilera);
        }

        // posiciona el <thead> debajo del elemento <table>
        tabla.appendChild(tblHead);

        // Crea las celdas
        for (var i = 0; i < admisionanticipoArray.length; i++) {

            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");
            // Le agregamos un id a la entidad <th>
            hilera.setAttribute('id', 'entidadServicio-' + admisionanticipoArray[i]["idadmisionanticipo"])

            for (var j = 0; j < thArray.length; j++) {

                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                // texto sea el contenido de <td>, ubica el elemento <td> al final
                // de la hilera de la tabla
                var celda = document.createElement("td");

                if(j == 0){
                    var textoCelda = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_fecha"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 1){
                    var textoCelda = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_cantidad"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 2){
                    var textoCelda = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_nota"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 3){
                    var textoCelda = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_tipo"]);
                    celda.appendChild(textoCelda);
                    hilera.appendChild(celda);
                }
                if(j == 4){

                    /*

                     var link3 = document.createElement("a");
                     link3.id = 'eliminarAdmisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"];
                     var eliminar = document.createElement("i");
                     eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                     link3.appendChild(eliminar);
                     celda.appendChild(link3);
                     hilera.appendChild(celda);
                     */

                    /*
                     * el edit ya no será necesario
                     *
                     var link2 = document.createElement("a");
                     link2.className = "modal-trigger";
                     link2.setAttribute ( 'data-position', 'right' );
                     link2.setAttribute ( 'data-tooltip', 'EditarAdmisionanticipo' );
                     link2.setAttribute ( 'href', '#edit-modal-admisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"] );
                     var editar = document.createElement("i");
                     editar.className = "blue-text text-darken-2 tiny mdi-action-assignment pointer";
                     */

                    var link3 = document.createElement("a");
                    link3.className = "tooltipped modal-trigger";
                    link3.setAttribute ( 'data-position', 'right' );
                    link3.setAttribute ( 'data-tooltip', 'EliminarAdmisionanticipo' );
                    link3.setAttribute ( 'href', '#delete-modal-admisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"] );
                    //link3.setAttribute ( 'id', 'delete-admisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"] );
                    var eliminar = document.createElement("i");
                    eliminar.className = "red-text text-darken-2 tiny mdi-action-delete pointer";
                    /*
                     link2.appendChild(editar);
                     celda.appendChild(link2);
                     */
                    link3.appendChild(eliminar);
                    celda.appendChild(link3);
                    hilera.appendChild(celda);

                    /*
                    <!-- Edit Modal Structure -->
                    var divcargosAdmisionEdit = document.getElementById('cargosAdmision')
                    var divEditModalCargoadmision = document.createElement('div')
                    divEditModalCargoadmision.setAttribute ( 'id', 'edit-modal-admisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"]);
                    divEditModalCargoadmision.className = "modal bottom-sheet";
                    var h4 = document.createElement('h4')
                    var texth4 = document.createTextNode("Editar-anticipo");
                    h4.appendChild(texth4);
                    var br = document.createElement('br')
                    var divRow = document.createElement('div')
                    divRow.className = "row";
                    var fieldset = document.createElement('fieldset')
                    var legend = document.createElement('legend')
                    var textlegend = document.createTextNode("Datos generales");
                    legend.appendChild(textlegend);
                    var divCol1 = document.createElement('div')
                    divCol1.className = "col s4";
                    var divLabelContainer1 = document.createElement('div')
                    divLabelContainer1.className = "label-container";
                    var label1 = document.createElement('label')
                    var textlabel1 = document.createTextNode("Cantidad:");
                    label1.appendChild(textlabel1);
                    var p1 = document.createElement('p')
                    var textp1 = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_cantidad"]);
                    p1.appendChild(textp1);
                    divLabelContainer1.appendChild(label1);
                    divLabelContainer1.appendChild(p1);
                    divCol1.appendChild(divLabelContainer1);
                    var divCol2 = document.createElement('div')
                    divCol2.className = "col s4";
                    var divLabelContainer2 = document.createElement('div')
                    divLabelContainer2.className = "label-container";
                    var label2 = document.createElement('label')
                    var textlabel2 = document.createTextNode("Nota:");
                    label2.appendChild(textlabel2);
                    var p2 = document.createElement('p')
                    var textp2 = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_nota"]);
                    p2.appendChild(textp2);
                    divLabelContainer2.appendChild(label2);
                    divLabelContainer2.appendChild(p2);
                    divCol2.appendChild(divLabelContainer2);
                    fieldset.appendChild(divCol1);
                    fieldset.appendChild(divCol2);
                    fieldset.appendChild(legend);
                    divRow.appendChild(fieldset);
                    var divEditModalFooter = document.createElement('div')
                    divEditModalFooter.className = "modal-footer";
                    var linkCerrar = document.createElement('a')
                    linkCerrar.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrar = document.createElement('i')
                    iconCerrar.className = "mdi-navigation-close left";
                    var textoIconCerrar = document.createTextNode('Cerrar');
                    iconCerrar.appendChild(textoIconCerrar);
                    linkCerrar.appendChild(iconCerrar);
                    divEditModalFooter.appendChild(linkCerrar);
                    divEditModalCargoadmision.appendChild(br);
                    divEditModalCargoadmision.appendChild(h4);
                    divEditModalCargoadmision.appendChild(divRow);
                    divEditModalCargoadmision.appendChild(divEditModalFooter);
                    divcargosAdmisionEdit.appendChild(divEditModalCargoadmision);
                    <!-- End Edit Modal Structure -->
                */

                    <!-- Start Delete Structure -->
                    var divcargosAdmisionDelete = document.getElementById('cargosAdmision')
                    var divDeleteModalCargoadmisionDelete = document.createElement('div')
                    divDeleteModalCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-admisionanticipo-'+admisionanticipoArray[i]["idadmisionanticipo"]);
                    divDeleteModalCargoadmisionDelete.className = "modal";
                    var divDeleteModalContentCargoadmisionDelete = document.createElement('div')
                    divDeleteModalContentCargoadmisionDelete.setAttribute ( 'id', 'delete-modal-admisionanticipo');
                    divDeleteModalContentCargoadmisionDelete.className = "modal-content";

                    var divRowDelete = document.createElement('div')
                    divRowDelete.setAttribute ( 'id', 'delete-modal-header-container');
                    divRowDelete.className = "row";
                    var divRowAtencionDelete = document.createElement('div')
                    divRowAtencionDelete.className = "col s4 offset-s4";
                    var h4Delete = document.createElement('h4')
                    var iDelete = document.createElement('i')
                    iDelete.className = "mdi-alert-warning";
                    var textoiDelete = document.createTextNode("ATENCION");
                    iDelete.appendChild(textoiDelete);
                    h4Delete.appendChild(iDelete);
                    divRowAtencionDelete.appendChild(h4Delete);
                    divRowDelete.appendChild(divRowAtencionDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRowDelete)

                    var divRow2Delete = document.createElement('div')
                    divRow2Delete.className = "row";
                    var fieldsetDelete = document.createElement('fieldset')
                    var legendDelete = document.createElement('legend')
                    var textlegendDelete = document.createTextNode("Datos generales");
                    legendDelete.appendChild(textlegendDelete);
                    var divCol1Delete = document.createElement('div')
                    divCol1Delete.className = "col s4";
                    var divLabelContainer1Delete = document.createElement('div')
                    divLabelContainer1Delete.className = "label-container";
                    var label1Delete = document.createElement('label')
                    var textlabel1Delete = document.createTextNode("Cantidad:");
                    label1Delete.appendChild(textlabel1Delete);
                    var p1Delete = document.createElement('p')
                    var textp1Delete = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_cantidad"]);
                    p1Delete.appendChild(textp1Delete);
                    divLabelContainer1Delete.appendChild(label1Delete);
                    divLabelContainer1Delete.appendChild(p1Delete);
                    divCol1Delete.appendChild(divLabelContainer1Delete);
                    var divCol2Delete = document.createElement('div')
                    divCol2Delete.className = "col s4";
                    var divLabelContainer2Delete = document.createElement('div')
                    divLabelContainer2Delete.className = "label-container";
                    var label2Delete = document.createElement('label')
                    var textlabel2Delete = document.createTextNode("Nota:");
                    label2Delete.appendChild(textlabel2Delete);
                    var p2Delete = document.createElement('p')
                    var textp2Delete = document.createTextNode(admisionanticipoArray[i]["admisionanticipo_nota"]);
                    p2Delete.appendChild(textp2Delete);
                    divLabelContainer2Delete.appendChild(label2Delete);
                    divLabelContainer2Delete.appendChild(p2Delete);
                    divCol2Delete.appendChild(divLabelContainer2Delete);
                    fieldsetDelete.appendChild(divCol1Delete);
                    fieldsetDelete.appendChild(divCol2Delete);
                    fieldsetDelete.appendChild(legendDelete);
                    divRow2Delete.appendChild(fieldsetDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow2Delete)

                    var divRow3Delete = document.createElement('div')
                    divRow3Delete.className = "row";
                    var divRowPreguntaDelete = document.createElement('div')
                    divRowPreguntaDelete.className = "col s12";
                    var h5Delete = document.createElement('h5')
                    var textoi2Delete = document.createTextNode("¿Estás seguro que deseas eliminar el cargo?");
                    h5Delete.appendChild(textoi2Delete);
                    divRowPreguntaDelete.appendChild(h5Delete);
                    divRow3Delete.appendChild(divRowPreguntaDelete);
                    divDeleteModalContentCargoadmisionDelete.appendChild(divRow3Delete)

                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalContentCargoadmisionDelete);

                    var divDeleteModalFooterDelete = document.createElement('div')
                    divDeleteModalFooterDelete.className = "modal-footer";
                    var linkCerrarDelete = document.createElement('a')
                    linkCerrarDelete.className = "modal-action modal-close waves-effect waves-light btn cerrar";
                    var iconCerrarDelete = document.createElement('i')
                    iconCerrarDelete.className = "mdi-navigation-close left";
                    var textoIconCerrarDelete = document.createTextNode('Cerrar');
                    iconCerrarDelete.appendChild(textoIconCerrarDelete);
                    linkCerrarDelete.appendChild(iconCerrarDelete);
                    var linkEliminarDelete = document.createElement('a')
                    linkEliminarDelete.setAttribute ( 'id', 'eliminarAdmisionanticipo'+admisionanticipoArray[i]["idadmisionanticipo"]);
                    linkEliminarDelete.className = "waves-effect waves-light btn eliminar";
                    var iconEliminarDelete = document.createElement('i')
                    iconEliminarDelete.className = "mdi-action-delete left";
                    var textoIconEliminarDelete = document.createTextNode('Eliminar');
                    iconEliminarDelete.appendChild(textoIconEliminarDelete);
                    linkEliminarDelete.appendChild(iconEliminarDelete);

                    divDeleteModalFooterDelete.appendChild(linkCerrarDelete);
                    divDeleteModalFooterDelete.appendChild(linkEliminarDelete);
                    divDeleteModalCargoadmisionDelete.appendChild(divDeleteModalFooterDelete);
                    divcargosAdmisionDelete.appendChild(divDeleteModalCargoadmisionDelete);
                    <!-- End Delete Modal Structure -->
                }
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);

            var idadmisionanticipo = admisionanticipoArray[i]["idadmisionanticipo"]
            var idadmision = admisionanticipoArray[i]["idadmision"]
            var cantidad = admisionanticipoArray[i]["admisionanticipo_cantidad"]

        }

        // posiciona el <tbody> debajo del elemento <table>
        tabla.appendChild(tblBody);

        // Si dan clic en eliminarAnticipoadmision-id
        $("#eliminarAdmisionanticipo"+idadmisionanticipo).click({idadmisionanticipo:idadmisionanticipo, idadmision:idadmision, cantidad:cantidad},function() {

            //Construimos la variable que se guardará en el data del Ajax para pasar a la url que procesará los datos
            var dataString = 'eliminar_admisionanticipo=true'+'&idadmisionanticipo=' + idadmisionanticipo + '&idadmision=' + idadmision + '&cantidad=' + cantidad;

            $.ajax({
                type: "POST",
                url: "<?php $this->url('pacientes', array('action'=>'detalles', 'id' => $pacienteEntity->getIdpaciente()));?>",
                dataType : 'json',
                data: dataString,
                async: false,
                jsonpCallback: 'callback',
                success: function(data) {
                    alert("Se eliminó exitosamente el anticipo por la cantidad de: "+cantidad+" MXN")

                    totalResponse('eliminar', null, 'no pagada', +(cantidad), null, 'admision', -(cantidad))
                },
                error: function(){
                    alert("Error al intentar eliminar el anticipo por la cantidad de: "+cantidad+" MXN")
                }
            });
            return false;

        });

        /*
         var href = $(this).attr("href", "#delete-modal-admisionanticipo-"+idadmisionanticipo)

         // Si dan clic en delete-modal-admisionanticipo-id
         href.click({idadmisionanticipo:idadmisionanticipo},function() {
         $('#tabla-admisionanticipo').closeModal();
         $('#delete-modal-admisionanticipo-'+idadmisionanticipo).openModal();
         });
         */

        divModalContentTablaAdmisionanticipo.appendChild(tabla);

        var brAdmisionanticipo = document.createElement('br');
        var hrAdmisionanticipo = document.createElement('hr');

        var divModalFooterTablaAdmisionanticipo = document.createElement('div');
        divModalFooterTablaAdmisionanticipo.className = 'modal-footer';
        var linkCerrarModalTablaAdmisionanticipo = document.createElement('a');
        linkCerrarModalTablaAdmisionanticipo.className = 'modal-action modal-close waves-effect waves-green btn cerrar';
        var iconCerrarModalTablaAdmisionanticipo = document.createElement('i')
        iconCerrarModalTablaAdmisionanticipo.className = "mdi-navigation-close left";
        var textoIconCerrarModalTablaAdmisionanticipo = document.createTextNode('Cerrar');
        iconCerrarModalTablaAdmisionanticipo.appendChild(textoIconCerrarModalTablaAdmisionanticipo);
        linkCerrarModalTablaAdmisionanticipo.appendChild(iconCerrarModalTablaAdmisionanticipo);
        divModalFooterTablaAdmisionanticipo.appendChild(linkCerrarModalTablaAdmisionanticipo);

        fieldsetModalTablaAdmisionanticipo.appendChild(divModalContentTablaAdmisionanticipo)
        fieldsetModalTablaAdmisionanticipo.appendChild(brAdmisionanticipo)
        fieldsetModalTablaAdmisionanticipo.appendChild(hrAdmisionanticipo)
        fieldsetModalTablaAdmisionanticipo.appendChild(divModalFooterTablaAdmisionanticipo)
        fieldsetModalTablaAdmisionanticipo.appendChild(legendModalTablaAdmisionanticipo)
        divRowModalTablaAdmisionanticipo.appendChild(fieldsetModalTablaAdmisionanticipo);
        divModalTablaAdmisionanticipo.appendChild(divRowModalTablaAdmisionanticipo);
        divcargosAdmision.appendChild(divModalTablaAdmisionanticipo);
    }

    function anticipoAdmision() {
        if ($('#anticipoAdmision').hasClass('hiddendiv')){
            $('#anticipoAdmision').removeClass('hiddendiv')
            $('#pagoAdmision').addClass('hiddendiv')
        }
    }
    function pagoAdmision() {
        if ($('#pagoAdmision').hasClass('hiddendiv')){
            $('#pagoAdmision').removeClass('hiddendiv')
            $('#anticipoAdmision').addClass('hiddendiv')
        }
    }
    function pagoConsulta() {
        if ($('#pagoConsulta').hasClass('hiddendiv')){
            $('#pagoConsulta').removeClass('hiddendiv')
        }
    }
    </script>

<?php } ?>